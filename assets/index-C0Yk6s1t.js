import{u as T,T as u,D as B,w as U,c as C,S as L,b as N}from"./editable-CteuoeWb.js";import{u as S}from"./use-inherit-ref-lmEEbD6_.js";import{i as V}from"./index-D2s9QVEm.js";import{u as A}from"./use-focused-zibqBCpO.js";import{u as F}from"./use-selected-CVkp2faw.js";import{B as I}from"./Button-ZsKZe3Ph.js";import{d as P,A as $,c as z,o as j,g as O,b as _,a as d,z as D,e as a,w as m,C as k,O as Y,P as M,f as q,h as E}from"./index-C_5Oh6uc.js";import{T as H}from"./Toolbar-C0OhOQAT.js";import{w as G}from"./with-history-g4SYTP6o.js";const J=["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga"],K={contenteditable:!1,style:{position:"relative"}},Q=["src"],W=P({__name:"ImageComp",props:{element:{}},setup(h){const c=h,l=F(),n=A(),i=T(),x=p=>{p.preventDefault()},o=()=>{u.removeNodes(i,{at:B.findPath(i,c.element)})},f=$();return(p,e)=>(j(),z("div",Y(M(a(f))),[O(p.$slots,"default"),_("div",K,[_("img",{src:c.element.url,style:D([{display:"block","max-width":"100%","max-height":"10em"},{boxShadow:`${a(l)&&a(n)?"0 0 0 3px #B4D5FF":"none"}`}])},null,12,Q),d(I,{active:"",onClick:o,onPointerdown:x,style:D([{position:"absolute",top:"0.5em",left:"0.5em","background-color":"white"},{display:`${a(l)&&a(n)?"inline":"none"}`}])},{default:m(()=>e[0]||(e[0]=[k(" delete ")])),_:1},8,["style"])])],16))}}),oe=P({__name:"index",setup(h){const c=[{type:"paragraph",children:[{text:"In addition to nodes that contain editable text, you can also create other types of nodes, like images or videos."}]},{type:"image",url:"https://www.slatejs.org/favicon.ico",children:[{text:""}]},{type:"paragraph",children:[{text:"This example shows images in action. It features two ways to add images. You can either add an image via the toolbar icon above, or if you want in on a little secret, copy an image URL to your clipboard and paste it anywhere in the editor!"}]},{type:"paragraph",children:[{text:"You can delete images with the cross in the top left. Try deleting this sheep:"}]},{type:"image",url:"https://cn.vuejs.org/logo.svg",children:[{text:""}]},{type:"paragraph",children:[{text:"You can delete images with the cross in the top left. Try deleting this sheep:"}]}],l=e=>{const{attributes:t,children:r,element:s}=e;switch(s.type){case"image":return E(W,{element:s,...S(t)},()=>r);default:return E("p",t,r)}},n=(e,t)=>{const r={type:"image",url:t,children:[{text:""}]};u.insertNodes(e,r),u.insertNodes(e,{type:"paragraph",children:[{text:""}]})},i=e=>{if(!e||!V(e))return!1;const t=new URL(e).pathname.split(".").pop();return t&&J.includes(t)},o=G((e=>{const{insertData:t,isVoid:r}=e;return e.isVoid=s=>s.type==="image"?!0:r(s),e.insertData=s=>{const w=s.getData("text/plain"),{files:y}=s;y?.length>0?Array.from(y).forEach(b=>{const g=new FileReader,[R]=b.type.split("/");R==="image"&&(g.addEventListener("load",()=>{const v=g.result;typeof v=="string"&&n(e,v)}),g.readAsDataURL(b))}):i(w)?n(e,w):t(s)},e})(U(C())));o.children=c;const f=()=>{const e=window.prompt("Enter the URL of the image:");if(e&&!i(e)){alert("URL is not an image");return}e&&n(o,e)},p=e=>{e.preventDefault()};return(e,t)=>(j(),q(a(L),{editor:a(o),"render-element":l},{default:m(()=>[d(H,null,{default:m(()=>[d(I,{onClick:f,onPointerdown:p},{default:m(()=>t[0]||(t[0]=[k(" image ")])),_:1})]),_:1}),d(a(N),{style:{padding:"10px"},placeholder:"Enter a titleâ€¦",spellcheck:""})]),_:1},8,["editor"]))}});export{oe as default};
