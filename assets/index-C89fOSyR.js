import{u as B,R as N,E as i,w as C,c as R,S as E,T as g,N as A,a as D,b as S}from"./editable-CteuoeWb.js";import{u as z}from"./use-focused-zibqBCpO.js";import{B as x}from"./Button-ZsKZe3Ph.js";import{d as w,x as H,q as I,f as b,o as T,T as V,b as O,a as u,w as p,C as y,z as $,e as h,h as F}from"./index-C_5Oh6uc.js";import{w as L}from"./with-history-g4SYTP6o.js";const P=w({__name:"HoveringToolbar",setup(M){const l=H("menu"),s=B(),f=z(),a=t=>{const e=i.marks(s);return e?e[t]===!0:!1},c=(t,e)=>{e.preventDefault(),a(t)?i.removeMark(s,t):i.addMark(s,t,!0)},n=t=>{t.preventDefault()},r=I(()=>{const t={padding:"8px 7px 6px",position:"absolute",zIndex:1,top:"-10000",left:"-10000",display:"block",marginTop:"-6px",opacity:0,backgroundColor:"#222",borderRadius:"4px",transition:"opacity 0.75s",lineHeight:1},e=s.selection,o=window.getSelection();if(!e||!f.value||N.isCollapsed(e)||i.string(s,e)==="")t.display="none";else if(!o)t.display="none";else{const d=o.getRangeAt(0).getBoundingClientRect();l.value&&(t.opacity=1,t.top=`${d.top+window.pageYOffset-l.value.offsetHeight}px`,t.left=`${d.left+window.pageXOffset-l.value.offsetWidth/2+d.width/2}px`)}return t});return(t,e)=>(T(),b(V,{to:"body"},[O("div",{ref:"menu","data-testid":"menu",style:$(r.value),onMousedown:n},[u(x,{reversed:!0,onClick:e[0]||(e[0]=o=>c("bold",o)),active:a("bold")},{default:p(()=>e[3]||(e[3]=[y("format_bold")])),_:1},8,["active"]),u(x,{reversed:!0,onClick:e[1]||(e[1]=o=>c("italic",o)),active:a("italic")},{default:p(()=>e[4]||(e[4]=[y("format_italic")])),_:1},8,["active"]),u(x,{style:{"margin-right":"0"},reversed:!0,onClick:e[2]||(e[2]=o=>c("underlined",o)),active:a("underlined")},{default:p(()=>e[5]||(e[5]=[y("format_underlined")])),_:1},8,["active"])],36)]))}}),Y=w({__name:"index",setup(M){const l=n=>{const{normalizeNode:r}=n;return n.normalizeNode=([t,e])=>{if(e.length===0){if(n.children.length<=1&&i.string(n,[0,0])===""){const o={type:"title",children:[{text:"Untitled"}]};g.insertNodes(n,o,{at:e.concat(0),select:!0})}if(n.children.length<2){const o={type:"paragraph",children:[{text:""}]};g.insertNodes(n,o,{at:e.concat(1)})}for(const[o,m]of A.children(n,e)){const d=m[0],v=k=>{if(D.isElement(o)&&o.type!==k){const _={type:k};g.setNodes(n,_,{at:m})}};switch(d){case 0:v("title");break;case 1:v("paragraph")}}}return r([t,e])},n},s=[{type:"paragraph",children:[{text:"This example shows how you can make a hovering menu appear above your content, which you can use to make text "},{text:"bold",bold:!0},{text:", "},{text:"italic",italic:!0},{text:", or anything else you might want to do!"}]},{type:"paragraph",children:[{text:"Try it out yourself! Just "},{text:"select any piece of text and the menu will appear",bold:!0},{text:"."}]}],f=({attributes:n,children:r,leaf:t})=>{const e={};return"bold"in t&&(e.fontWeight="bold"),"italic"in t&&(e.fontStyle="italic"),"underlined"in t&&(e.borderBottom="1px solid black"),F("span",{...n,style:e},r)},a=L(l(C(R())));a.children=s;const c=n=>{const r=e=>{const o=i.marks(a);return o?o[e]===!0:!1},t=e=>{r(e)?i.removeMark(a,e):i.addMark(a,e,!0)};if("inputType"in n)switch(n.inputType){case"formatBold":return n.preventDefault(),t("bold");case"formatItalic":return n.preventDefault(),t("italic");case"formatUnderline":return n.preventDefault(),t("underlined")}};return(n,r)=>(T(),b(h(E),{editor:h(a),"render-leaf":f},{default:p(()=>[u(P),u(h(S),{onBeforeinput:c,placeholder:"Enter some text...",spellcheck:""})]),_:1},8,["editor"]))}});export{Y as default};
