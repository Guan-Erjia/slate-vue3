import{d as k,f as E,w as x,e as c,o as M,a as y,b as d,l as N,v as V,k as A,h as B}from"./index-cO_khfoC.js";import{w as C,c as O,S,b as D,N as v}from"./editable-OBw7MXqz.js";import{T as j}from"./Toolbar-DItQkW23.js";import{w as H}from"./with-history-Bo5zoz4N.js";const I={style:{position:"relative"}},z=k({__name:"index",setup(L){const b=[{type:"paragraph",children:[{text:"This is editable text that you can search. As you search, it looks for matching strings of text, and adds "},{text:"decorations",bold:!0},{text:" to them in realtime."}]},{type:"paragraph",children:[{text:"Try it out for yourself by typing in the search box above!"}]}],w=({attributes:i,children:e,leaf:t})=>B("span",{...i,"data-cy":"highlight"in t?"search-highlighted":void 0,style:{fontWeight:"bold"in t?"bold":void 0,backgroundColor:"highlight"in t?"#ffeeba":void 0}},e),_=([i,e])=>{const t=[];if(r.value&&v.isElement(i)&&Array.isArray(i.children)&&i.children.every(v.isText)){const o=i.children.map(s=>s.text),u=o.join(""),T=r.value.length;let l=u.indexOf(r.value),a=0,n=0;for(;l!==-1;){for(;a<o.length&&l>=n+o[a].length;)n=n+o[a].length,a++;let s=l-n,h=T;for(;a<o.length&&h>0;){const f=o[a],g=[...e,a],m=Math.min(h,f.length-s);t.push({anchor:{path:g,offset:s},focus:{path:g,offset:s+m},highlight:!0}),h=h-m,h>0&&(n=n+f.length,s=0,a++)}l=u.indexOf(r.value,l+r.value.length)}}return t},p=H(C(O()));p.children=b;const r=A("");return(i,e)=>(M(),E(c(S),{editor:c(p),decorate:_,"render-leaf":w},{default:x(()=>[y(j,null,{default:x(()=>[d("div",I,[e[1]||(e[1]=d("span",{style:{position:"absolute",top:"0.5em",left:"0.6em",color:"#ccc","font-family":"Material Icons"}},"search",-1)),N(d("input",{type:"search",placeholder:"Search the text...","onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),style:{"padding-left":"2.5em",width:"100%"}},null,512),[[V,r.value]])])]),_:1}),y(c(D),{placeholder:"Enter some plain text..."})]),_:1},8,["editor"]))}});export{z as default};
