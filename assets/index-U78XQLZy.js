import{u as y,D as b,T as x,w,c as _,S as g,b as v}from"./editable-CteuoeWb.js";import{u as E}from"./use-inherit-ref-lmEEbD6_.js";import{d as m,q as V,A as B,c as C,o as h,b as c,D as l,B as k,e as n,f as D,w as T,a as M,h as u}from"./index-C_5Oh6uc.js";import{w as N}from"./with-history-g4SYTP6o.js";const P=["src"],S=["value"],U=m({__name:"VideoElement",props:{element:{}},setup(p){const a=["http:","https:"],i=y(),s=p,d=V(()=>{let e=null;try{e=new URL(s.element.url)}catch(t){console.error(t)}return e&&a.includes(e.protocol)?e.href:"about:blank"}),o=e=>{const t=b.findPath(i,s.element),f={url:e.target.value};x.setNodes(i,f,{at:t})},r=B();return(e,t)=>(h(),C("div",k({contenteditable:!1},n(r)),[c("iframe",{src:`${d.value}?title=0&byline=0&portrait=0`,frameBorder:"0",style:{border:"none",width:"100%",height:"400px"}},null,8,P),c("input",{type:"text",style:{"margin-top":"5px","box-sizing":"border-box"},value:e.element.url,onChange:o,onCompositionstart:t[0]||(t[0]=l(()=>{},["stop"])),onCompositionupdate:t[1]||(t[1]=l(()=>{},["stop"])),onCompositionend:t[2]||(t[2]=l(()=>{},["stop"]))},null,40,S)],16))}}),$=m({__name:"index",setup(p){const a=[{type:"paragraph",children:[{text:"In addition to simple image nodes, you can actually create complex embedded nodes. For example, this one contains an input element that lets you change the video being rendered!"}]},{type:"video",url:"https://player.vimeo.com/video/26689853",children:[{text:""}]},{type:"paragraph",children:[{text:"Try it out! This editor is built to handle Vimeo embeds, but you could handle any type."}]}],s=N((o=>{const r=o.isVoid;return o.isVoid=e=>e.type==="video"?!0:r(e),o})(w(_())));s.children=a;const d=({attributes:o,children:r,element:e})=>{switch(e.type){case"video":return u(U,{element:e,...E(o)},()=>r);default:return u("p",o,r)}};return(o,r)=>(h(),D(n(g),{editor:n(s),"render-element":d},{default:T(()=>[M(n(v),{placeholder:"Enter some text..."})]),_:1},8,["editor"]))}});export{$ as default};
