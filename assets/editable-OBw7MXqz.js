import{G as Ws,k as ae,H as Be,h as Q,I as ne,J,q as ee,d as we,i as at,j as Et,g as Hs,x as Ht,K as Dt,p as zs,A as Vs,L as Us}from"./index-cO_khfoC.js";const jn=Symbol("SLATE_USE_EDITOR"),zt=Symbol("SLATE_USE_ELEMENT"),Ks=Symbol("SLATE_USE_FOCUSED"),Wn=Symbol("SLATE_USE_COMPOSING"),Hn=Symbol("SLATE_USE_READ_ONLY"),qs=Symbol("SLATE_USE_SELECTION"),Gs={transform(e,t){const{current:n,affinity:o}=e;if(n==null)return;const r=g.transform(n,t,{affinity:o});e.current=r,r==null&&e.unref()}},Ys={transform(e,t){const{current:n,affinity:o}=e;if(n==null)return;const r=V.transform(n,t,{affinity:o});e.current=r,r==null&&e.unref()}},Xs={transform(e,t){const{current:n,affinity:o}=e;if(n==null)return;const r=A.transform(n,t,{affinity:o});e.current=r,r==null&&e.unref()}},g={ancestors(e,t={}){const{reverse:n=!1}=t;let o=g.levels(e,t);return n?o=o.slice(1):o=o.slice(0,-1),o},common(e,t){const n=[];for(let o=0;o<e.length&&o<t.length;o++){const r=e[o],s=t[o];if(r!==s)break;n.push(r)}return n},compare(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){if(e[o]<t[o])return-1;if(e[o]>t[o])return 1}return 0},endsAfter(e,t){const n=e.length-1,o=e.slice(0,n),r=t.slice(0,n),s=e[n],a=t[n];return g.equals(o,r)&&s>a},endsAt(e,t){const n=e.length,o=e.slice(0,n),r=t.slice(0,n);return g.equals(o,r)},endsBefore(e,t){const n=e.length-1,o=e.slice(0,n),r=t.slice(0,n),s=e[n],a=t[n];return g.equals(o,r)&&s<a},equals(e,t){return e.length===t.length&&e.every((n,o)=>n===t[o])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return g.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&g.compare(e,t)===0},isBefore(e,t){return g.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&g.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&g.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&g.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&g.compare(e,t)===0},isPath(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),o=t.slice(0,-1),r=e[e.length-1],s=t[t.length-1];return r!==s&&g.equals(n,o)},levels(e,t={}){const{reverse:n=!1}=t,o=[];for(let r=0;r<=e.length;r++)o.push(e.slice(0,r));return n&&o.reverse(),o},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},relative(e,t){if(!g.isAncestor(t,e)&&!g.equals(e,t))throw new Error(`Cannot get the relative path of [${e}] inside ancestor [${t}], because it is not above or equal to the path.`);return e.slice(t.length)},transform(e,t,n={}){if(!e)return null;const o=[...e],{affinity:r="forward"}=n;if(e.length===0)return o;switch(t.type){case"insert_node":{const{path:s}=t;(g.equals(s,o)||g.endsBefore(s,o)||g.isAncestor(s,o))&&(o[s.length-1]+=1);break}case"remove_node":{const{path:s}=t;if(g.equals(s,o)||g.isAncestor(s,o))return null;g.endsBefore(s,o)&&(o[s.length-1]-=1);break}case"merge_node":{const{path:s,position:a}=t;g.equals(s,o)||g.endsBefore(s,o)?o[s.length-1]-=1:g.isAncestor(s,o)&&(o[s.length-1]-=1,o[s.length]+=a);break}case"split_node":{const{path:s,position:a}=t;if(g.equals(s,o)){if(r==="forward")o[o.length-1]+=1;else if(r!=="backward")return null}else g.endsBefore(s,o)?o[s.length-1]+=1:g.isAncestor(s,o)&&e[s.length]>=a&&(o[s.length-1]+=1,o[s.length]-=a);break}case"move_node":{const{path:s,newPath:a}=t;if(g.equals(s,a))return o;if(g.isAncestor(s,o)||g.equals(s,o)){const u=a.slice();return g.endsBefore(s,a)&&s.length<a.length&&(u[s.length-1]-=1),u.concat(o.slice(s.length))}else g.isSibling(s,a)&&(g.isAncestor(a,o)||g.equals(a,o))?g.endsBefore(s,o)?o[s.length-1]-=1:o[s.length-1]+=1:g.endsBefore(a,o)||g.equals(a,o)||g.isAncestor(a,o)?(g.endsBefore(s,o)&&(o[s.length-1]-=1),o[a.length-1]+=1):g.endsBefore(s,o)&&(g.equals(a,o)&&(o[a.length-1]+=1),o[s.length-1]-=1);break}}return o}},Zs={transform(e,t){let n=!1;switch(t.type){case"insert_node":{const{path:o,node:r}=t,s=h.parent(e,o),a=o[o.length-1];if(a>s.children.length)throw new Error(`Cannot apply an 'insert_node' operation at path [${o}] because the destination is past the end of the node.`);s.children.splice(a,0,r),n=!0;break}case"insert_text":{const{path:o,offset:r,text:s}=t;if(s.length===0)break;const a=h.leaf(e,o),u=a.text.slice(0,r),l=a.text.slice(r);a.text=u+s+l,n=!0;break}case"merge_node":{const{path:o}=t,r=h.get(e,o),s=g.previous(o),a=h.get(e,s),u=h.parent(e,o),l=o[o.length-1];if(h.isText(r)&&h.isText(a))a.text+=r.text;else if(!h.isText(r)&&!h.isText(a))a.children.push(...r.children);else throw new Error(`Cannot apply a 'merge_node' operation at path [${o}] to nodes of different interfaces: ${te.stringify(r)} ${te.stringify(a)}`);u.children.splice(l,1),n=!0;break}case"move_node":{const{path:o,newPath:r}=t;if(g.isAncestor(o,r))throw new Error(`Cannot move a path [${o}] to new path [${r}] because the destination is inside itself.`);const s=h.get(e,o),a=h.parent(e,o),u=o[o.length-1];a.children.splice(u,1);const l=g.transform(o,t),c=h.get(e,g.parent(l)),f=l[l.length-1];c.children.splice(f,0,s),n=!0;break}case"remove_node":{const{path:o}=t,r=o[o.length-1];if(h.parent(e,o).children.splice(r,1),e.selection){let a={...e.selection};for(const[u,l]of A.points(a)){const c=V.transform(u,t);if(a!=null&&c!=null)a[l]=c;else{let f,d;for(const[C,m]of h.texts(e))if(g.compare(m,o)===-1)f=[C,m];else{d=[C,m];break}let p=!1;f&&d&&(g.isSibling(f[1],o)?p=!1:g.equals(d[1],o)?p=!0:p=g.common(f[1],o).length<g.common(d[1],o).length),f&&!p?a[l]={path:f[1],offset:f[0].text.length}:d?a[l]={path:d[1],offset:0}:a=null}}(!a||!A.equals(a,e.selection))&&(e.selection=a)}break}case"remove_text":{const{path:o,offset:r,text:s}=t;if(s.length===0)break;const a=h.leaf(e,o),u=a.text.slice(0,r),l=a.text.slice(r+s.length);a.text=u+l,n=!0;break}case"set_node":{const{path:o,properties:r,newProperties:s}=t;if(o.length===0)throw new Error("Cannot set properties on the root node!");const a=h.get(e,o);for(const u in s){if(u==="children"||u==="text")throw new Error(`Cannot set the '${u}' property of nodes!`);const l=s[u];l==null?delete a[u]:a[u]=l}for(const u in r)Object.prototype.hasOwnProperty.call(s,u)||delete a[u];break}case"set_selection":{const{newProperties:o}=t;if(o==null){e.selection=null;break}if(e.selection==null){if(!(o.anchor&&o.focus))throw new Error(`Cannot apply an incomplete 'set_selection' operation properties ${te.stringify(o)} when there is no current selection.`);e.selection={...o};break}const r={...e.selection};for(const s in o){const a=o[s];if(a==null){if(s==="anchor"||s==="focus")throw new Error(`Cannot remove the '${s}' selection property`);delete r[s]}else r[s]=a}e.selection=r;break}case"split_node":{const{path:o,position:r,properties:s}=t;if(o.length===0)throw new Error(`Cannot apply a 'split_node' operation at path [${o}] because the root node cannot be split.`);const a=h.get(e,o),u=h.parent(e,o),l=o[o.length-1];let c;if(h.isText(a)){const f=a.text.slice(0,r),d=a.text.slice(r);a.text=f,c={...s,text:d}}else{const f=a.children.slice(0,r),d=a.children.slice(r);a.children=f,c={...s,children:d}}u.children.splice(l+1,0,c),n=!0;break}}if(n&&e.selection){const o={...e.selection};for(const[r,s]of A.points(o))o[s]=V.transform(r,t);A.equals(o,e.selection)||(e.selection=o)}}},Js={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},Qs={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},re=e=>typeof e=="object"&&e!==null,zn=(e,t)=>{for(const n in e){const o=e[n],r=t[n];if(Array.isArray(o)&&Array.isArray(r)){if(o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!==r[s])return!1}else if(re(o)&&re(r)){if(!zn(o,r))return!1}else if(o!==r)return!1}for(const n in t)if(e[n]===void 0&&t[n]!==void 0)return!1;return!0},A={edges(e,t={}){const{reverse:n=!1}=t,{anchor:o,focus:r}=e;return A.isBackward(e)===n?[o,r]:[r,o]},end(e){const[,t]=A.edges(e);return t},equals(e,t){return V.equals(e.anchor,t.anchor)&&V.equals(e.focus,t.focus)},surrounds(e,t){const n=A.intersection(e,t);return n?A.equals(n,t):!1},includes(e,t){if(O.isRange(t)){if(A.includes(e,t.anchor)||A.includes(e,t.focus))return!0;const[a,u]=A.edges(e),[l,c]=A.edges(t);return V.isBefore(a,l)&&V.isAfter(u,c)}const[n,o]=A.edges(e);let r=!1,s=!1;return O.isPoint(t)?(r=V.compare(t,n)>=0,s=V.compare(t,o)<=0):(r=g.compare(t,n.path)>=0,s=g.compare(t,o.path)<=0),r&&s},intersection(e,t){const{anchor:n,focus:o,...r}=e,[s,a]=A.edges(e),[u,l]=A.edges(t),c=V.isBefore(s,u)?u:s,f=V.isBefore(a,l)?a:l;return V.isBefore(f,c)?null:{anchor:c,focus:f,...r}},isBackward(e){const{anchor:t,focus:n}=e;return V.isAfter(t,n)},isCollapsed(e){const{anchor:t,focus:n}=e;return V.equals(t,n)},isExpanded(e){return!A.isCollapsed(e)},isForward(e){return!A.isBackward(e)},isRange(e){return re(e)&&V.isPoint(e.anchor)&&V.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){const[t]=A.edges(e);return t},transform(e,t,n={}){if(e===null)return null;const{affinity:o="inward"}=n;let r,s;if(o==="inward"){const l=A.isCollapsed(e);A.isForward(e)?(r="forward",s=l?r:"backward"):(r="backward",s=l?r:"forward")}else o==="outward"?A.isForward(e)?(r="backward",s="forward"):(r="forward",s="backward"):(r=o,s=o);const a=V.transform(e.anchor,t,{affinity:r}),u=V.transform(e.focus,t,{affinity:s});return!a||!u?null:{anchor:a,focus:u}}},Qt=(e,{deep:t=!1}={})=>!re(e)||typeof e.apply=="function"?!1:t?h.isNodeList(e.children):Array.isArray(e.children),tt={isAncestor(e,{deep:t=!1}={}){return re(e)&&h.isNodeList(e.children,{deep:t})},isElement:Qt,isElementList(e,{deep:t=!1}={}){return Array.isArray(e)&&e.every(n=>tt.isElement(n,{deep:t}))},isElementProps(e){return e.children!==void 0},isElementType:(e,t,n="type")=>Qt(e)&&e[n]===t,matches(e,t){for(const n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},h={ancestor(e,t){const n=h.get(e,t);if(h.isText(n))throw new Error(`Cannot get the ancestor node at path [${t}] because it refers to a text node instead: ${te.stringify(n)}`);return n},*ancestors(e,t,n={}){for(const o of g.ancestors(t,n))yield[h.ancestor(e,o),o]},child(e,t){if(h.isText(e))throw new Error(`Cannot get the child of a text node: ${te.stringify(e)}`);const n=e.children[t];if(n==null)throw new Error(`Cannot get child at index \`${t}\` in node: ${te.stringify(e)}`);return n},*children(e,t,n={}){const{reverse:o=!1}=n,r=h.ancestor(e,t),{children:s}=r;let a=o?s.length-1:0;for(;o?a>=0:a<s.length;){const u=h.child(r,a),l=t.concat(a);yield[u,l],a=o?a-1:a+1}},common(e,t,n){const o=g.common(t,n);return[h.get(e,o),o]},descendant(e,t){const n=h.get(e,t);if(h.isEditor(n))throw new Error(`Cannot get the descendant node at path [${t}] because it refers to the root editor node instead: ${te.stringify(n)}`);return n},*descendants(e,t={}){for(const[n,o]of h.nodes(e,t))o.length!==0&&(yield[n,o])},*elements(e,t={}){for(const[n,o]of h.nodes(e,t))h.isElement(n)&&(yield[n,o])},extractProps(e){if(h.isText(e)){const{text:t,...n}=e;return n}else{const{children:t,...n}=e;return n}},first(e,t){const n=t.slice();let o=h.get(e,n);for(;o&&!(h.isText(o)||o.children.length===0);)o=o.children[0],n.push(0);return[o,n]},fragment(e,t){const n={children:e.children},[o,r]=A.edges(t),s=h.leaf(n,o.path).text.slice(o.offset),a=h.leaf(n,r.path).text.slice(0,r.offset);let u=n;for(let d=0;d<r.path.length;d++){const p=r.path[d];u.children=u.children.slice(0,p+1),h.isElement(u.children[p])&&(u.children[p]={...u.children[p]},u=u.children[p])}u=n;for(let d=0;d<o.path.length;d++){const p=o.path[d];u.children=u.children.slice(p),h.isElement(u.children[0])&&(u.children[0]={...u.children[0]},u=u.children[0])}const l=d=>d.map(p=>h.isElement(p)?{...p,children:l(p.children)}:{...p});n.children=l(n.children);const[c]=h.first(n,[]);h.isText(c)&&(c.text=s);const[f]=h.last(n,[]);return h.isText(f)&&(f.text=a),n.children},get(e,t){const n=h.getIf(e,t);if(n===void 0)throw new Error(`Cannot find a descendant at path [${t}] in node: ${te.stringify(e)}`);return n},getIf(e,t){let n=e;for(let o=0;o<t.length;o++){const r=t[o];if(h.isText(n)||!n.children[r])return;n=n.children[r]}return n},has(e,t){let n=e;for(let o=0;o<t.length;o++){const r=t[o];if(h.isText(n)||!n.children[r])return!1;n=n.children[r]}return!0},isAncestor(e){return!h.isText(e)},isEditor(e){return typeof e.apply=="function"},isElement(e){return Array.isArray(e.children)&&typeof e.apply!="function"},isNode(e,{deep:t=!1}={}){return h.isText(e)||tt.isElement(e,{deep:t})||i.isEditor(e,{deep:t})},isNodeList(e,{deep:t=!1}={}){return Array.isArray(e)&&e.every(n=>h.isNode(n,{deep:t}))},isText(e){return typeof e.text=="string"},last(e,t){const n=t.slice();let o=h.get(e,n);for(;o&&!(h.isText(o)||o.children.length===0);){const r=o.children.length-1;o=o.children[r],n.push(r)}return[o,n]},leaf(e,t){const n=h.get(e,t);if(!h.isText(n))throw new Error(`Cannot get the leaf node at path [${t}] because it refers to a non-leaf node: ${te.stringify(n)}`);return n},*levels(e,t,n={}){for(const o of g.levels(t,n))yield[h.get(e,o),o]},matches(e,t){return h.isElement(e)&&tt.isElementProps(t)&&tt.matches(e,t)||h.isText(e)&&Fe.isTextProps(t)&&Fe.matches(e,t)},*nodes(e,t={}){const{pass:n,reverse:o=!1}=t,{from:r=[],to:s}=t,a=new Set;let u=[],l=e;for(;!(s&&(o?g.isBefore(u,s):g.isAfter(u,s)));){if(a.has(l)||(yield[l,u]),!a.has(l)&&!h.isText(l)&&l.children.length!==0&&(n==null||n([l,u])===!1)){a.add(l);let c=o?l.children.length-1:0;g.isAncestor(u,r)&&(c=r[u.length]),u=u.concat(c),l=h.get(e,u);continue}if(u.length===0)break;if(!o){const c=g.next(u);if(h.has(e,c)){u=c,l=h.get(e,u);continue}}if(o&&u[u.length-1]!==0){u=g.previous(u),l=h.get(e,u);continue}u=g.parent(u),l=h.get(e,u),a.add(l)}},parent(e,t){const n=g.parent(t),o=h.get(e,n);if(h.isText(o))throw new Error(`Cannot get the parent of path [${t}] because it does not exist in the root.`);return o},string(e){return h.isText(e)?e.text:e.children.map(h.string).join("")},*texts(e,t={}){for(const[n,o]of h.nodes(e,t))h.isText(n)&&(yield[n,o])}},et={isNodeOperation(e){return et.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!re(e))return!1;switch(e.type){case"insert_node":return g.isPath(e.path)&&h.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&g.isPath(e.path);case"merge_node":return typeof e.position=="number"&&g.isPath(e.path)&&re(e.properties);case"move_node":return g.isPath(e.path)&&g.isPath(e.newPath);case"remove_node":return g.isPath(e.path)&&h.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&g.isPath(e.path);case"set_node":return g.isPath(e.path)&&re(e.properties)&&re(e.newProperties);case"set_selection":return e.properties===null&&A.isRange(e.newProperties)||e.newProperties===null&&A.isRange(e.properties)||re(e.properties)&&re(e.newProperties);case"split_node":return g.isPath(e.path)&&typeof e.position=="number"&&re(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>et.isOperation(t))},isSelectionOperation(e){return et.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return et.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"insert_text":return{...e,type:"remove_text"};case"merge_node":return{...e,type:"split_node",path:g.previous(e.path)};case"move_node":{const{newPath:t,path:n}=e;if(g.equals(t,n))return e;if(g.isSibling(n,t))return{...e,path:t,newPath:n};const o=g.transform(n,e),r=g.transform(g.next(n),e);return{...e,path:o,newPath:r}}case"remove_node":return{...e,type:"insert_node"};case"remove_text":return{...e,type:"insert_text"};case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"split_node":return{...e,type:"merge_node",path:g.next(e.path)}}}},eo=(e,{deep:t=!1}={})=>re(e)?typeof e.above=="function"&&typeof e.addMark=="function"&&typeof e.after=="function"&&typeof e.apply=="function"&&typeof e.before=="function"&&typeof e.collapse=="function"&&typeof e.delete=="function"&&typeof e.deleteBackward=="function"&&typeof e.deleteForward=="function"&&typeof e.deleteFragment=="function"&&typeof e.deselect=="function"&&typeof e.edges=="function"&&typeof e.elementReadOnly=="function"&&typeof e.end=="function"&&typeof e.first=="function"&&typeof e.fragment=="function"&&typeof e.getDirtyPaths=="function"&&typeof e.getFragment=="function"&&typeof e.getMarks=="function"&&typeof e.hasBlocks=="function"&&typeof e.hasInlines=="function"&&typeof e.hasPath=="function"&&typeof e.hasTexts=="function"&&typeof e.insertBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertNodes=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertText=="function"&&typeof e.isBlock=="function"&&typeof e.isEdge=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isEmpty=="function"&&typeof e.isEnd=="function"&&typeof e.isInline=="function"&&typeof e.isNormalizing=="function"&&typeof e.isSelectable=="function"&&typeof e.isStart=="function"&&typeof e.isVoid=="function"&&typeof e.last=="function"&&typeof e.leaf=="function"&&typeof e.levels=="function"&&typeof e.liftNodes=="function"&&typeof e.markableVoid=="function"&&typeof e.mergeNodes=="function"&&typeof e.move=="function"&&typeof e.moveNodes=="function"&&typeof e.next=="function"&&typeof e.node=="function"&&typeof e.nodes=="function"&&typeof e.normalize=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.parent=="function"&&typeof e.path=="function"&&typeof e.pathRef=="function"&&typeof e.pathRefs=="function"&&typeof e.point=="function"&&typeof e.pointRef=="function"&&typeof e.pointRefs=="function"&&typeof e.positions=="function"&&typeof e.previous=="function"&&typeof e.range=="function"&&typeof e.rangeRef=="function"&&typeof e.rangeRefs=="function"&&typeof e.removeMark=="function"&&typeof e.removeNodes=="function"&&typeof e.select=="function"&&typeof e.setNodes=="function"&&typeof e.setNormalizing=="function"&&typeof e.setPoint=="function"&&typeof e.setSelection=="function"&&typeof e.shouldMergeNodesRemovePrevNode=="function"&&typeof e.shouldNormalize=="function"&&typeof e.splitNodes=="function"&&typeof e.start=="function"&&typeof e.string=="function"&&typeof e.unhangRange=="function"&&typeof e.unsetNodes=="function"&&typeof e.unwrapNodes=="function"&&typeof e.void=="function"&&typeof e.withoutNormalizing=="function"&&typeof e.wrapNodes=="function"&&(e.marks===null||re(e.marks))&&(e.selection===null||A.isRange(e.selection))&&(t?h.isNodeList(e.children)&&et.isOperationList(e.operations):Array.isArray(e.children)&&Array.isArray(e.operations)):!1,i={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e,t={}){const{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e,t={}){const{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e,t={}){return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor:eo,isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)},shouldMergeNodesRemovePrevNode:(e,t,n)=>e.shouldMergeNodesRemovePrevNode(t,n)},O={isLocation(e){return g.isPath(e)||V.isPoint(e)||A.isRange(e)},isPath(e){return Array.isArray(e)},isPoint(e){return"offset"in e},isRange(e){return"anchor"in e},isSpan(e){return Array.isArray(e)&&Array.isArray(e[0])}},V={compare(e,t){const n=g.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return V.compare(e,t)===1},isBefore(e,t){return V.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&g.equals(e.path,t.path)},isPoint(e){return re(e)&&typeof e.offset=="number"&&g.isPath(e.path)},transform(e,t,n={}){if(e===null)return null;const{affinity:o="forward"}=n;let r=e.offset,s=[...e.path];switch(t.type){case"insert_node":case"move_node":{s=g.transform(s,t,n);break}case"insert_text":{g.equals(t.path,s)&&(t.offset<r||t.offset===r&&o==="forward")&&(r+=t.text.length);break}case"merge_node":{g.equals(t.path,s)&&(r+=t.position),s=g.transform(s,t,n);break}case"remove_text":{g.equals(t.path,s)&&t.offset<=r&&(r-=Math.min(r-t.offset,t.text.length));break}case"remove_node":{if(g.equals(t.path,s)||g.isAncestor(t.path,s))return null;s=g.transform(s,t,n);break}case"split_node":{if(g.equals(t.path,s)){if(t.position===r&&o==null)return null;(t.position<r||t.position===r&&o==="forward")&&(r-=t.position,s=g.transform(s,t,{...n,affinity:"forward"}))}else s=g.transform(s,t,n);break}default:return e}return{path:s,offset:r}}};let en;const te={setScrubber(e){en=e},stringify(e){return JSON.stringify(e,en)}},Fe={equals(e,t,n={}){const{loose:o=!1}=n;function r(s){const{text:a,...u}=s;return u}return zn(o?r(e):e,o?r(t):t)},isText(e){return re(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>Fe.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(const n in t)if(n!=="text"&&(!Object.prototype.hasOwnProperty.call(e,n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){let n=[{leaf:{...e}}];for(const o of t){const{anchor:r,focus:s,merge:a,...u}=o,[l,c]=A.edges(o),f=[];let d=0;const p=l.offset,C=c.offset,m=a??Object.assign;for(const{leaf:E}of n){const{length:D}=E.text,F=d;if(d+=D,p<=F&&d<=C){m(E,u),f.push({leaf:E});continue}if(p!==C&&(p===d||C===F)||p>d||C<F||C===F&&F!==0){f.push({leaf:E});continue}let y=E,k,N;if(C<d){const x=C-F;N={leaf:{...y,text:y.text.slice(x)}},y={...y,text:y.text.slice(0,x)}}if(p>F){const x=p-F;k={leaf:{...y,text:y.text.slice(0,x)}},y={...y,text:y.text.slice(x)}}m(y,u),k&&f.push(k),f.push({leaf:y}),N&&f.push(N)}n=f}if(n.length>1){let o=0;for(const[r,s]of n.entries()){const a=o,u=a+s.leaf.text.length,l={start:a,end:u};r===0&&(l.isFirst=!0),r===n.length-1&&(l.isLast=!0),s.position=l,o=u}}return n}},Vt=e=>e.selection?e.selection:e.children.length>0?i.end(e,[]):[0],Ue=(e,t)=>{const[n]=i.node(e,t);return o=>o===n},Ut=(e,t=!1)=>{const n=!t,o=t?ro(e):e;let r=0,s=0,a=0,u=null,l=null;for(const c of o){const f=c.codePointAt(0);if(!f)break;const d=Bo(c,f);if([r,s]=n?[s,d]:[d,r],$e(r,2)&&$e(s,1024)&&(n?u=tn(e.substring(0,a)):u=tn(e.substring(0,e.length-a)),!u)||$e(r,4)&&$e(s,4)&&(l!==null?l=!l:n?l=!0:l=Ao(e.substring(0,e.length-a)),!l)||r!==0&&s!==0&&Do(r,s))break;a+=c.length}return a||1},to=/\s/,no=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,so=/['\u2018\u2019]/,oo=(e,t=!1)=>{let n=0,o=!1;for(;e.length>0;){const r=Ut(e,t),[s,a]=Kt(e,r,t);if(Vn(s,a,t))o=!0,n+=r;else if(!o)n+=r;else break;e=a}return n},Kt=(e,t,n)=>{if(n){const o=e.length-t;return[e.slice(o,e.length),e.slice(0,o)]}return[e.slice(0,t),e.slice(t)]},Vn=(e,t,n=!1)=>{if(to.test(e))return!1;if(so.test(e)){const o=Ut(t,n),[r,s]=Kt(t,o,n);if(Vn(r,s,n))return!0}return!no.test(e)},ro=function*(e){const t=e.length-1;for(let n=0;n<e.length;n++){const o=e.charAt(t-n);if(io(o.charCodeAt(0))){const r=e.charAt(t-n-1);if(ao(r.charCodeAt(0))){yield r+o,n++;continue}}yield o}},ao=e=>e>=55296&&e<=56319,io=e=>e>=56320&&e<=57343,uo=/^[\p{Gr_Ext}\p{EMod}]$/u,co=/^[\u0600-\u0605\u06DD\u070F\u0890-\u0891\u08E2\u0D4E\u{110BD}\u{110CD}\u{111C2}-\u{111C3}\u{1193F}\u{11941}\u{11A3A}\u{11A84}-\u{11A89}\u{11D46}]$/u,lo=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BF-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC1\u0CC3-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0D02-\u0D03\u0D3F-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82-\u0D83\u0DD0-\u0DD1\u0DD8-\u0DDE\u0DF2-\u0DF3\u0E33\u0EB3\u0F3E-\u0F3F\u0F7F\u1031\u103B-\u103C\u1056-\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF7\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BE-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC\u{11000}\u{11002}\u{11082}\u{110B0}-\u{110B2}\u{110B7}-\u{110B8}\u{1112C}\u{11145}-\u{11146}\u{11182}\u{111B3}-\u{111B5}\u{111BF}-\u{111C0}\u{111CE}\u{1122C}-\u{1122E}\u{11232}-\u{11233}\u{11235}\u{112E0}-\u{112E2}\u{11302}-\u{11303}\u{1133F}\u{11341}-\u{11344}\u{11347}-\u{11348}\u{1134B}-\u{1134D}\u{11362}-\u{11363}\u{11435}-\u{11437}\u{11440}-\u{11441}\u{11445}\u{114B1}-\u{114B2}\u{114B9}\u{114BB}-\u{114BC}\u{114BE}\u{114C1}\u{115B0}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{11630}-\u{11632}\u{1163B}-\u{1163C}\u{1163E}\u{116AC}\u{116AE}-\u{116AF}\u{116B6}\u{11726}\u{1182C}-\u{1182E}\u{11838}\u{11931}-\u{11935}\u{11937}-\u{11938}\u{1193D}\u{11940}\u{11942}\u{119D1}-\u{119D3}\u{119DC}-\u{119DF}\u{119E4}\u{11A39}\u{11A57}-\u{11A58}\u{11A97}\u{11C2F}\u{11C3E}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D8A}-\u{11D8E}\u{11D93}-\u{11D94}\u{11D96}\u{11EF5}-\u{11EF6}\u{16F51}-\u{16F87}\u{16FF0}-\u{16FF1}\u{1D166}\u{1D16D}]$/u,fo=/^[\u1100-\u115F\uA960-\uA97C]$/u,ho=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/u,po=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/u,go=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/u,Co=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/u,mo=new RegExp("^\\p{ExtPict}$","u"),Bo=(e,t)=>{let n=2048;return e.search(uo)!==-1&&(n|=1),t===8205&&(n|=2),t>=127462&&t<=127487&&(n|=4),e.search(co)!==-1&&(n|=8),e.search(lo)!==-1&&(n|=16),e.search(fo)!==-1&&(n|=32),e.search(ho)!==-1&&(n|=64),e.search(po)!==-1&&(n|=128),e.search(go)!==-1&&(n|=256),e.search(Co)!==-1&&(n|=512),e.search(mo)!==-1&&(n|=1024),n};function $e(e,t){return(e&t)!==0}const Eo=[[32,864],[320,192],[640,128],[2048,3],[2048,16],[8,2048],[2,1024],[4,4]];function Do(e,t){return Eo.findIndex(n=>$e(e,n[0])&&$e(t,n[1]))===-1}const wo=new RegExp("\\p{ExtPict}[\\p{Gr_Ext}\\p{EMod}]*\\u200D$","u"),tn=e=>e.search(wo)!==-1,yo=new RegExp("\\p{RI}+$","gu"),Ao=e=>{const t=e.match(yo);return t===null?!1:t[0].length/2%2===1},wt=new WeakMap,yt=new WeakMap,Un=new WeakMap,nn=new WeakMap,sn=new WeakMap,on=new WeakMap,Fo={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t,n={}){i.withoutNormalizing(e,()=>{const{voids:o=!1}=n;let{at:r=Vt(e)}=n;if(O.isPath(r)&&(r=i.range(e,r)),O.isRange(r))if(A.isCollapsed(r))r=r.anchor;else{const u=A.end(r);if(!o&&i.void(e,{at:u}))return;const l=A.start(r),c=i.pointRef(e,l),f=i.pointRef(e,u);b.delete(e,{at:r,voids:o});const d=c.unref(),p=f.unref();r=d||p,b.setSelection(e,{anchor:r,focus:r})}if(!o&&i.void(e,{at:r})||i.elementReadOnly(e,{at:r}))return;const{path:s,offset:a}=r;t.length>0&&e.apply({type:"insert_text",path:s,offset:a,text:t})})}},b={...Zs,...Js,...Qs,...Fo},Ct=new WeakMap,bo=e=>Ct.get(e)||!1,xo=(e,t,n)=>{const o=Ct.get(e)||!1;Ct.set(e,!0);try{t(),n()}finally{Ct.set(e,o)}};function Kn(e,t,n){const o=wt.get(e)||[],r=yt.get(e)||new Set;let s,a;const u=l=>{if(l){const c=l.join(",");a.has(c)||(a.add(c),s.push(l))}};if(n){s=[],a=new Set;for(const l of o){const c=n(l);u(c)}}else s=o,a=r;for(const l of t)u(l);wt.set(e,s),yt.set(e,a)}const ko=(e,t)=>{for(const n of i.pathRefs(e))Gs.transform(n,t);for(const n of i.pointRefs(e))Ys.transform(n,t);for(const n of i.rangeRefs(e))Xs.transform(n,t);if(!bo(e)){const n=g.operationCanTransformPath(t)?o=>g.transform(o,t):void 0;Kn(e,e.getDirtyPaths(t),n)}b.transform(e,t),e.operations.push(t),i.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),Promise.resolve().then(()=>{e.onChange({operation:t}),e.operations=[]})},To=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{const{path:n}=t;return g.levels(n)}case"insert_node":{const{node:n,path:o}=t,r=g.levels(o),s=h.isText(n)?[]:Array.from(h.nodes(n),([,a])=>o.concat(a));return[...r,...s]}case"merge_node":{const{path:n}=t,o=g.ancestors(n),r=g.previous(n);return[...o,r]}case"move_node":{const{path:n,newPath:o}=t;if(g.equals(n,o))return[];const r=[],s=[];for(const c of g.ancestors(n)){const f=g.transform(c,t);r.push(f)}for(const c of g.ancestors(o)){const f=g.transform(c,t);s.push(f)}const a=s[s.length-1],u=o[o.length-1],l=a.concat(u);return[...r,...s,l]}case"remove_node":{const{path:n}=t;return[...g.ancestors(n)]}case"split_node":{const{path:n}=t,o=g.levels(n),r=g.next(n);return[...o,r]}default:return[]}},No=e=>{const{selection:t}=e;return t?h.fragment(e,t):[]},vo=(e,t,n)=>{const[o,r]=t;if(h.isText(o))return;"children"in o||(o.children=[]);let s=o;if(s!==e&&s.children.length===0){const u={text:""};b.insertNodes(e,u,{at:r.concat(0),voids:!0}),s=h.get(e,r)}if(s!==e&&(e.isInline(s)||h.isText(s.children[0])||e.isInline(s.children[0])))for(let u=0;u<s.children.length;u++){const l=s.children[u],c=s.children[u-1];if(h.isText(l))c!=null&&h.isText(c)&&(l.text===""?(b.removeNodes(e,{at:r.concat(u),voids:!0}),s=h.get(e,r),u--):c.text===""?(b.removeNodes(e,{at:r.concat(u-1),voids:!0}),s=h.get(e,r),u--):Fe.equals(l,c,{loose:!0})&&(b.mergeNodes(e,{at:r.concat(u),voids:!0}),s=h.get(e,r),u--));else if(e.isInline(l)){if(c==null||!h.isText(c)){const f={text:""};b.insertNodes(e,f,{at:r.concat(u),voids:!0}),s=h.get(e,r),u++}if(u===s.children.length-1){const f={text:""};b.insertNodes(e,f,{at:r.concat(u+1),voids:!0}),s=h.get(e,r),u++}}else b.unwrapNodes(e,{at:r.concat(u),voids:!0}),s=h.get(e,r),u--}else for(let u=0;u<s.children.length;u++){const l=s.children[u];(h.isText(l)||e.isInline(l))&&(n?.fallbackElement?b.wrapNodes(e,n.fallbackElement(),{at:r.concat(u),voids:!0}):b.removeNodes(e,{at:r.concat(u),voids:!0}),s=h.get(e,r),u--)}},Ro=(e,{iteration:t,initialDirtyPathsLength:n})=>{const o=n*42;if(t>o)throw new Error(`Could not completely normalize the editor after ${o} iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.`);return!0},So=(e,t={})=>{const{voids:n=!1,mode:o="lowest",at:r=e.selection,match:s}=t;if(!r)return;let a=i.path(e,r);if(!O.isRange(r)||g.equals(r.focus.path,r.anchor.path)){if(a.length===0)return;a=g.parent(a)}const u=o==="lowest",[l]=i.levels(e,{at:a,voids:n,match:s,reverse:u});return l},_o=(e,t,n)=>{const{selection:o}=e;if(o){const r=(u,l)=>{if(!h.isText(u))return!1;const[c,f]=i.parent(e,l);return!e.isVoid(c)||e.markableVoid(c)},s=A.isExpanded(o);let a=!1;if(!s){const[u,l]=i.node(e,o);if(u&&r(u,l)){const[c]=i.parent(e,l);a=c&&e.markableVoid(c)}}if(s||a)b.setNodes(e,{[t]:n},{match:r,split:!0,voids:!0});else{const u={...i.marks(e)||{},[t]:n};e.marks=u,e.onChange()}}},Po=(e,t,n={})=>{const o=i.point(e,t,{edge:"end"}),r=i.end(e,[]),s={anchor:o,focus:r},{distance:a=1}=n;let u=0,l;for(const c of i.positions(e,{...n,at:s})){if(u>a)break;u!==0&&(l=c),u++}return l},Oo=(e,t,n={})=>{const o=i.start(e,[]),r=i.point(e,t,{edge:"start"}),s={anchor:o,focus:r},{distance:a=1}=n;let u=0,l;for(const c of i.positions(e,{...n,at:s,reverse:!0})){if(u>a)break;u!==0&&(l=c),u++}return l},Io=(e,t)=>{const{selection:n}=e;n&&A.isCollapsed(n)&&b.delete(e,{unit:t,reverse:!0})},Lo=(e,t)=>{const{selection:n}=e;n&&A.isCollapsed(n)&&b.delete(e,{unit:t})},Mo=(e,{direction:t="forward"}={})=>{const{selection:n}=e;n&&A.isExpanded(n)&&b.delete(e,{reverse:t==="backward"})},$o=(e,t)=>[i.start(e,t),i.end(e,t)],jo=(e,t={})=>i.above(e,{...t,match:n=>h.isElement(n)&&i.isElementReadOnly(e,n)}),Wo=(e,t)=>i.point(e,t,{edge:"end"}),Ho=(e,t)=>{const n=i.path(e,t,{edge:"start"});return i.node(e,n)},zo=(e,t)=>{const n=i.range(e,t);return h.fragment(e,n)},Vo=(e,t={})=>i.above(e,{...t,match:n=>h.isElement(n)&&i.isVoid(e,n)}),Uo=(e,t)=>t.children.some(n=>h.isElement(n)&&i.isBlock(e,n)),Ko=(e,t)=>t.children.some(n=>h.isText(n)||i.isInline(e,n)),qo=(e,t)=>h.has(e,t),Go=(e,t)=>t.children.every(n=>h.isText(n)),Yo=e=>{b.splitNodes(e,{always:!0})},Xo=(e,t,n)=>{b.insertNodes(e,t,n)},Zo=e=>{b.splitNodes(e,{always:!0})},Jo=(e,t,n={})=>{const{selection:o,marks:r}=e;if(o){if(r){const s={text:t,...r};b.insertNodes(e,s,{at:n.at,voids:n.voids})}else b.insertText(e,t,n);e.marks=null}},Qo=(e,t)=>!e.isInline(t),er=(e,t,n)=>i.isStart(e,t,n)||i.isEnd(e,t,n),tr=(e,t)=>{const{children:n}=t,[o]=n;return n.length===0||n.length===1&&h.isText(o)&&o.text===""&&!e.isVoid(t)},nr=(e,t,n)=>{const o=i.end(e,n);return V.equals(t,o)},sr=e=>{const t=Un.get(e);return t===void 0?!0:t},or=(e,t,n)=>{if(t.offset!==0)return!1;const o=i.start(e,n);return V.equals(t,o)},rr=(e,t)=>{const n=i.path(e,t,{edge:"end"});return i.node(e,n)},ar=(e,t,n={})=>{const o=i.path(e,t,n);return[h.leaf(e,o),o]};function*ir(e,t={}){const{at:n=e.selection,reverse:o=!1,voids:r=!1}=t;let{match:s}=t;if(s==null&&(s=()=>!0),!n)return;const a=[],u=i.path(e,n);for(const[l,c]of h.levels(e,u))if(s(l,c)&&(a.push([l,c]),!r&&h.isElement(l)&&i.isVoid(e,l)))break;o&&a.reverse(),yield*a}const ur=(e,t={})=>{const{marks:n,selection:o}=e;if(!o)return null;let{anchor:r,focus:s}=o;if(n)return n;if(A.isExpanded(o)){if(A.isBackward(o)&&([s,r]=[r,s]),i.isEnd(e,r,r.path)){const C=i.after(e,r);C&&(r=C)}const[p]=i.nodes(e,{match:h.isText,at:{anchor:r,focus:s}});if(p){const[C]=p,{text:m,...E}=C;return E}else return{}}const{path:a}=r;let[u]=i.leaf(e,a);if(r.offset===0){const f=i.previous(e,{at:a,match:h.isText});if(!i.above(e,{match:p=>h.isElement(p)&&i.isVoid(e,p)&&e.markableVoid(p)})){const p=i.above(e,{match:C=>h.isElement(C)&&i.isBlock(e,C)});if(f&&p){const[C,m]=f,[,E]=p;g.isAncestor(E,m)&&(u=C)}}}const{text:l,...c}=u;return c},cr=(e,t={})=>{const{mode:n="lowest",voids:o=!1}=t,{at:r=e.selection}=t;let{match:s}=t;if(!r)return;const a=i.after(e,r,{voids:o});if(!a)return;const[,u]=i.last(e,[]),l=[a.path,u];if(O.isPath(r)&&r.length===0)throw new Error("Cannot get the next node from the root node!");if(s==null)if(O.isPath(r)){const[f]=i.parent(e,r);s=d=>f.children.includes(d)}else s=()=>!0;const[c]=i.nodes(e,{at:l,match:s,mode:n,voids:o});return c},lr=(e,t,n={})=>{const o=i.path(e,t,n);return[h.get(e,o),o]};function*fr(e,t={}){const{at:n=e.selection,mode:o="all",universal:r=!1,reverse:s=!1,voids:a=!1,pass:u}=t;let{match:l}=t;if(l||(l=()=>!0),!n)return;let c,f;if(O.isSpan(n))c=n[0],f=n[1];else{const m=i.path(e,n,{edge:"start"}),E=i.path(e,n,{edge:"end"});c=s?E:m,f=s?m:E}const d=h.nodes(e,{reverse:s,from:c,to:f,pass:([m,E])=>u&&u([m,E])?!0:h.isElement(m)?!!(!a&&(i.isVoid(e,m)||i.isElementReadOnly(e,m))):!1}),p=[];let C;for(const[m,E]of d){const D=C&&g.compare(E,C[1])===0;if(o==="highest"&&D)continue;if(!l(m,E)){if(r&&!D&&h.isText(m))return;continue}if(o==="lowest"&&D){C=[m,E];continue}const F=o==="lowest"?C:[m,E];F&&(r?p.push(F):yield F),C=[m,E]}o==="lowest"&&C&&(r?p.push(C):yield C),r&&(yield*p)}const dr=(e,t={})=>{const{force:n=!1,operation:o}=t,r=u=>wt.get(u)||[],s=u=>yt.get(u)||new Set,a=u=>{const l=r(u).pop(),c=l.join(",");return s(u).delete(c),l};if(i.isNormalizing(e)){if(n){const u=Array.from(h.nodes(e),([,c])=>c),l=new Set(u.map(c=>c.join(",")));wt.set(e,u),yt.set(e,l)}r(e).length!==0&&i.withoutNormalizing(e,()=>{for(const f of r(e))if(h.has(e,f)){const d=i.node(e,f),[p,C]=d;h.isElement(p)&&p.children.length===0&&e.normalizeNode(d,{operation:o,force:n})}let u=r(e);const l=u.length;let c=0;for(;u.length!==0;){if(!e.shouldNormalize({dirtyPaths:u,iteration:c,initialDirtyPathsLength:l,operation:o}))return;const f=a(e);if(h.has(e,f)){const d=i.node(e,f);e.normalizeNode(d,{operation:o,force:n})}c++,u=r(e)}})}},hr=(e,t,n={})=>{const o=i.path(e,t,n),r=g.parent(o);return i.node(e,r)},pr=(e,t,n={})=>{const{affinity:o="forward"}=n,r={current:t,affinity:o,unref(){const{current:a}=r;return i.pathRefs(e).delete(r),r.current=null,a}};return i.pathRefs(e).add(r),r},gr=e=>{let t=nn.get(e);return t||(t=new Set,nn.set(e,t)),t},Cr=(e,t,n={})=>{const{depth:o,edge:r}=n;if(O.isPath(t)){if(r==="start"){const[,s]=h.first(e,t);t=s}else if(r==="end"){const[,s]=h.last(e,t);t=s}}return O.isRange(t)&&(r==="start"?t=A.start(t):r==="end"?t=A.end(t):t=g.common(t.anchor.path,t.focus.path)),O.isPoint(t)&&(t=t.path),o!=null&&(t=t.slice(0,o)),t},mr=(e,t,n={})=>{const{affinity:o="forward"}=n,r={current:t,affinity:o,unref(){const{current:a}=r;return i.pointRefs(e).delete(r),r.current=null,a}};return i.pointRefs(e).add(r),r},Br=e=>{let t=sn.get(e);return t||(t=new Set,sn.set(e,t)),t},Er=(e,t,n={})=>{const{edge:o="start"}=n;if(O.isPath(t)){let r;if(o==="end"){const[,a]=h.last(e,t);r=a}else{const[,a]=h.first(e,t);r=a}const s=h.get(e,r);if(!h.isText(s))throw new Error(`Cannot get the ${o} point in the node at path [${t}] because it has no ${o} text node.`);return{path:r,offset:o==="end"?s.text.length:0}}if(O.isRange(t)){const[r,s]=A.edges(t);return o==="start"?r:s}return t};function*Dr(e,t={}){const{at:n=e.selection,unit:o="offset",reverse:r=!1,voids:s=!1}=t;if(!n)return;const a=i.range(e,n),[u,l]=A.edges(a),c=r?l:u;let f=!1,d="",p=0,C=0,m=0;const E=[];for(const[F,y]of i.nodes(e,{at:n,reverse:r,voids:s})){const k=E.some(x=>g.isAncestor(x,y));function*N(x){k||(yield x)}if(h.isElement(F)){if(!e.isSelectable(F))if(E.push(y),r){g.hasPrevious(y)&&(yield*N(i.end(e,g.previous(y))));continue}else{const x=g.next(y);i.hasPath(e,x)&&(yield*N(i.start(e,x)));continue}if(!s&&(e.isVoid(F)||e.isElementReadOnly(F))){yield*N(i.start(e,y));continue}if(e.isInline(F))continue;if(i.hasInlines(e,F)){const x=g.isAncestor(y,l.path)?l:i.end(e,y),R=g.isAncestor(y,u.path)?u:i.start(e,y);d=i.string(e,{anchor:R,focus:x},{voids:s}),f=!0}}if(h.isText(F)){const x=g.equals(y,c.path);for(x?(C=r?c.offset:F.text.length-c.offset,m=c.offset):(C=F.text.length,m=r?C:0),(x||f||o==="offset")&&(yield*N({path:y,offset:m}),f=!1);;){if(p===0){if(d==="")break;p=D(d,o,r),d=Kt(d,p,r)[1]}if(m=r?m-p:m+p,C=C-p,C<0){p=-C;break}p=0,yield*N({path:y,offset:m})}}}function D(F,y,k){return y==="character"?Ut(F,k):y==="word"?oo(F,k):y==="line"||y==="block"?F.length:1}}const wr=(e,t={})=>{const{mode:n="lowest",voids:o=!1}=t;let{match:r}=t;const{at:s=e.selection}=t;if(!s)return;const a=i.before(e,s,{voids:o});if(!a)return;const[,u]=i.first(e,[]),l=[a.path,u];if(O.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(r==null)if(O.isPath(s)){const[f]=i.parent(e,s);r=d=>f.children.includes(d)}else r=()=>!0;const[c]=i.nodes(e,{reverse:!0,at:l,match:r,mode:n,voids:o});return c},yr=(e,t,n={})=>{const{affinity:o="forward"}=n,r={current:t,affinity:o,unref(){const{current:a}=r;return i.rangeRefs(e).delete(r),r.current=null,a}};return i.rangeRefs(e).add(r),r},Ar=e=>{let t=on.get(e);return t||(t=new Set,on.set(e,t)),t},Fr=(e,t,n)=>{if(O.isRange(t)&&!n)return t;const o=i.start(e,t),r=i.end(e,n||t);return{anchor:o,focus:r}},br=(e,t)=>{const{selection:n}=e;if(n){const o=(a,u)=>{if(!h.isText(a))return!1;const[l]=i.parent(e,u);return!e.isVoid(l)||e.markableVoid(l)},r=A.isExpanded(n);let s=!1;if(!r){const[a,u]=i.node(e,n);if(a&&o(a,u)){const[l]=i.parent(e,u);s=l&&e.markableVoid(l)}}if(r||s)b.unsetNodes(e,t,{match:o,split:!0,voids:!0});else{const a={...i.marks(e)||{}};delete a[t],e.marks=a,e.onChange()}}},xr=(e,t)=>{Un.set(e,t)},kr=(e,t)=>i.point(e,t,{edge:"start"}),Tr=(e,t,n={})=>{const{voids:o=!1}=n,r=i.range(e,t),[s,a]=A.edges(r);let u="";for(const[l,c]of i.nodes(e,{at:r,match:h.isText,voids:o})){let f=l.text;g.equals(c,a.path)&&(f=f.slice(0,a.offset)),g.equals(c,s.path)&&(f=f.slice(s.offset)),u+=f}return u},Nr=(e,t,n={})=>{const{voids:o=!1}=n,r=A.edges(t),[s]=r;let[,a]=r;if(s.offset!==0||a.offset!==0||A.isCollapsed(t)||g.hasPrevious(a.path))return t;const u=i.above(e,{at:a,match:p=>h.isElement(p)&&i.isBlock(e,p),voids:o}),l=u?u[1]:[],f={anchor:i.start(e,s),focus:a};let d=!0;for(const[p,C]of i.nodes(e,{at:f,match:h.isText,reverse:!0,voids:o})){if(d){d=!1;continue}if(p.text!==""||g.isBefore(C,l)){a={path:C,offset:p.text.length};break}}return{anchor:s,focus:a}},vr=(e,t)=>{const n=i.isNormalizing(e);i.setNormalizing(e,!1);try{t()}finally{i.setNormalizing(e,n)}i.normalize(e)},Rr=(e,[t,n],[o,r])=>h.isElement(t)&&i.isEmpty(e,t)||h.isText(t)&&t.text===""&&n[n.length-1]!==0;var qn=typeof global=="object"&&global&&global.Object===Object&&global,Sr=typeof self=="object"&&self&&self.Object===Object&&self,de=qn||Sr||Function("return this")(),He=de.Symbol,Gn=Object.prototype,_r=Gn.hasOwnProperty,Pr=Gn.toString,Je=He?He.toStringTag:void 0;function Or(e){var t=_r.call(e,Je),n=e[Je];try{e[Je]=void 0;var o=!0}catch{}var r=Pr.call(e);return o&&(t?e[Je]=n:delete e[Je]),r}var Ir=Object.prototype,Lr=Ir.toString;function Mr(e){return Lr.call(e)}var $r="[object Null]",jr="[object Undefined]",rn=He?He.toStringTag:void 0;function lt(e){return e==null?e===void 0?jr:$r:rn&&rn in Object(e)?Or(e):Mr(e)}function ft(e){return e!=null&&typeof e=="object"}var qt=Array.isArray;function bt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wr="[object AsyncFunction]",Hr="[object Function]",zr="[object GeneratorFunction]",Vr="[object Proxy]";function Yn(e){if(!bt(e))return!1;var t=lt(e);return t==Hr||t==zr||t==Wr||t==Vr}var Nt=de["__core-js_shared__"],an=(function(){var e=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Ur(e){return!!an&&an in e}var Kr=Function.prototype,qr=Kr.toString;function xe(e){if(e!=null){try{return qr.call(e)}catch{}try{return e+""}catch{}}return""}var Gr=/[\\^$.*+?()[\]{}|]/g,Yr=/^\[object .+?Constructor\]$/,Xr=Function.prototype,Zr=Object.prototype,Jr=Xr.toString,Qr=Zr.hasOwnProperty,ea=RegExp("^"+Jr.call(Qr).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ta(e){if(!bt(e)||Ur(e))return!1;var t=Yn(e)?ea:Yr;return t.test(xe(e))}function na(e,t){return e?.[t]}function ke(e,t){var n=na(e,t);return ta(n)?n:void 0}var _t=ke(de,"WeakMap"),un=Object.create,sa=(function(){function e(){}return function(t){if(!bt(t))return{};if(un)return un(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})(),cn=(function(){try{var e=ke(Object,"defineProperty");return e({},"",{}),e}catch{}})();function oa(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e}var ra=9007199254740991,aa=/^(?:0|[1-9]\d*)$/;function ia(e,t){var n=typeof e;return t=t??ra,!!t&&(n=="number"||n!="symbol"&&aa.test(e))&&e>-1&&e%1==0&&e<t}function ua(e,t,n){t=="__proto__"&&cn?cn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xn(e,t){return e===t||e!==e&&t!==t}var ca=Object.prototype,la=ca.hasOwnProperty;function fa(e,t,n){var o=e[t];(!(la.call(e,t)&&Xn(o,n))||n===void 0&&!(t in e))&&ua(e,t,n)}var da=9007199254740991;function Zn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=da}function ha(e){return e!=null&&Zn(e.length)&&!Yn(e)}var pa=Object.prototype;function Jn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||pa;return e===n}function ga(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var Ca="[object Arguments]";function ln(e){return ft(e)&&lt(e)==Ca}var Qn=Object.prototype,ma=Qn.hasOwnProperty,Ba=Qn.propertyIsEnumerable,Ea=ln((function(){return arguments})())?ln:function(e){return ft(e)&&ma.call(e,"callee")&&!Ba.call(e,"callee")};function Da(){return!1}var es=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fn=es&&typeof module=="object"&&module&&!module.nodeType&&module,wa=fn&&fn.exports===es,dn=wa?de.Buffer:void 0,ya=dn?dn.isBuffer:void 0,ts=ya||Da,Aa="[object Arguments]",Fa="[object Array]",ba="[object Boolean]",xa="[object Date]",ka="[object Error]",Ta="[object Function]",Na="[object Map]",va="[object Number]",Ra="[object Object]",Sa="[object RegExp]",_a="[object Set]",Pa="[object String]",Oa="[object WeakMap]",Ia="[object ArrayBuffer]",La="[object DataView]",Ma="[object Float32Array]",$a="[object Float64Array]",ja="[object Int8Array]",Wa="[object Int16Array]",Ha="[object Int32Array]",za="[object Uint8Array]",Va="[object Uint8ClampedArray]",Ua="[object Uint16Array]",Ka="[object Uint32Array]",U={};U[Ma]=U[$a]=U[ja]=U[Wa]=U[Ha]=U[za]=U[Va]=U[Ua]=U[Ka]=!0;U[Aa]=U[Fa]=U[Ia]=U[ba]=U[La]=U[xa]=U[ka]=U[Ta]=U[Na]=U[va]=U[Ra]=U[Sa]=U[_a]=U[Pa]=U[Oa]=!1;function qa(e){return ft(e)&&Zn(e.length)&&!!U[lt(e)]}function Gt(e){return function(t){return e(t)}}var ns=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nt=ns&&typeof module=="object"&&module&&!module.nodeType&&module,Ga=nt&&nt.exports===ns,vt=Ga&&qn.process,ze=(function(){try{var e=nt&&nt.require&&nt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch{}})(),hn=ze&&ze.isTypedArray,Ya=hn?Gt(hn):qa,Xa=Object.prototype,Za=Xa.hasOwnProperty;function Ja(e,t){var n=qt(e),o=!n&&Ea(e),r=!n&&!o&&ts(e),s=!n&&!o&&!r&&Ya(e),a=n||o||r||s,u=a?ga(e.length,String):[],l=u.length;for(var c in e)Za.call(e,c)&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ia(c,l)))&&u.push(c);return u}function ss(e,t){return function(n){return e(t(n))}}var Qa=ss(Object.keys,Object),ei=Object.prototype,ti=ei.hasOwnProperty;function ni(e){if(!Jn(e))return Qa(e);var t=[];for(var n in Object(e))ti.call(e,n)&&n!="constructor"&&t.push(n);return t}function si(e){return ha(e)?Ja(e):ni(e)}var it=ke(Object,"create");function oi(){this.__data__=it?it(null):{},this.size=0}function ri(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ai="__lodash_hash_undefined__",ii=Object.prototype,ui=ii.hasOwnProperty;function ci(e){var t=this.__data__;if(it){var n=t[e];return n===ai?void 0:n}return ui.call(t,e)?t[e]:void 0}var li=Object.prototype,fi=li.hasOwnProperty;function di(e){var t=this.__data__;return it?t[e]!==void 0:fi.call(t,e)}var hi="__lodash_hash_undefined__";function pi(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=it&&t===void 0?hi:t,this}function be(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}be.prototype.clear=oi;be.prototype.delete=ri;be.prototype.get=ci;be.prototype.has=di;be.prototype.set=pi;function gi(){this.__data__=[],this.size=0}function xt(e,t){for(var n=e.length;n--;)if(Xn(e[n][0],t))return n;return-1}var Ci=Array.prototype,mi=Ci.splice;function Bi(e){var t=this.__data__,n=xt(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():mi.call(t,n,1),--this.size,!0}function Ei(e){var t=this.__data__,n=xt(t,e);return n<0?void 0:t[n][1]}function Di(e){return xt(this.__data__,e)>-1}function wi(e,t){var n=this.__data__,o=xt(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function ge(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ge.prototype.clear=gi;ge.prototype.delete=Bi;ge.prototype.get=Ei;ge.prototype.has=Di;ge.prototype.set=wi;var ut=ke(de,"Map");function yi(){this.size=0,this.__data__={hash:new be,map:new(ut||ge),string:new be}}function Ai(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function kt(e,t){var n=e.__data__;return Ai(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Fi(e){var t=kt(this,e).delete(e);return this.size-=t?1:0,t}function bi(e){return kt(this,e).get(e)}function xi(e){return kt(this,e).has(e)}function ki(e,t){var n=kt(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function Ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ke.prototype.clear=yi;Ke.prototype.delete=Fi;Ke.prototype.get=bi;Ke.prototype.has=xi;Ke.prototype.set=ki;function Ti(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}var Ni=ss(Object.getPrototypeOf,Object);function vi(){this.__data__=new ge,this.size=0}function Ri(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Si(e){return this.__data__.get(e)}function _i(e){return this.__data__.has(e)}var Pi=200;function Oi(e,t){var n=this.__data__;if(n instanceof ge){var o=n.__data__;if(!ut||o.length<Pi-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ke(o)}return n.set(e,t),this.size=n.size,this}function qe(e){var t=this.__data__=new ge(e);this.size=t.size}qe.prototype.clear=vi;qe.prototype.delete=Ri;qe.prototype.get=Si;qe.prototype.has=_i;qe.prototype.set=Oi;var os=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pn=os&&typeof module=="object"&&module&&!module.nodeType&&module,Ii=pn&&pn.exports===os,gn=Ii?de.Buffer:void 0;gn&&gn.allocUnsafe;function Li(e,t){return e.slice()}function Mi(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var a=e[n];t(a,n,e)&&(s[r++]=a)}return s}function $i(){return[]}var ji=Object.prototype,Wi=ji.propertyIsEnumerable,Cn=Object.getOwnPropertySymbols,Hi=Cn?function(e){return e==null?[]:(e=Object(e),Mi(Cn(e),function(t){return Wi.call(e,t)}))}:$i;function zi(e,t,n){var o=t(e);return qt(e)?o:Ti(o,n(e))}function Vi(e){return zi(e,si,Hi)}var Pt=ke(de,"DataView"),Ot=ke(de,"Promise"),It=ke(de,"Set"),mn="[object Map]",Ui="[object Object]",Bn="[object Promise]",En="[object Set]",Dn="[object WeakMap]",wn="[object DataView]",Ki=xe(Pt),qi=xe(ut),Gi=xe(Ot),Yi=xe(It),Xi=xe(_t),pe=lt;(Pt&&pe(new Pt(new ArrayBuffer(1)))!=wn||ut&&pe(new ut)!=mn||Ot&&pe(Ot.resolve())!=Bn||It&&pe(new It)!=En||_t&&pe(new _t)!=Dn)&&(pe=function(e){var t=lt(e),n=t==Ui?e.constructor:void 0,o=n?xe(n):"";if(o)switch(o){case Ki:return wn;case qi:return mn;case Gi:return Bn;case Yi:return En;case Xi:return Dn}return t});var Zi=Object.prototype,Ji=Zi.hasOwnProperty;function Qi(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ji.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var yn=de.Uint8Array;function Yt(e){var t=new e.constructor(e.byteLength);return new yn(t).set(new yn(e)),t}function eu(e,t){var n=Yt(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var tu=/\w*$/;function nu(e){var t=new e.constructor(e.source,tu.exec(e));return t.lastIndex=e.lastIndex,t}var An=He?He.prototype:void 0,Fn=An?An.valueOf:void 0;function su(e){return Fn?Object(Fn.call(e)):{}}function ou(e,t){var n=Yt(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}var ru="[object Boolean]",au="[object Date]",iu="[object Map]",uu="[object Number]",cu="[object RegExp]",lu="[object Set]",fu="[object String]",du="[object Symbol]",hu="[object ArrayBuffer]",pu="[object DataView]",gu="[object Float32Array]",Cu="[object Float64Array]",mu="[object Int8Array]",Bu="[object Int16Array]",Eu="[object Int32Array]",Du="[object Uint8Array]",wu="[object Uint8ClampedArray]",yu="[object Uint16Array]",Au="[object Uint32Array]";function Fu(e,t,n){var o=e.constructor;switch(t){case hu:return Yt(e);case ru:case au:return new o(+e);case pu:return eu(e);case gu:case Cu:case mu:case Bu:case Eu:case Du:case wu:case yu:case Au:return ou(e);case iu:return new o;case uu:case fu:return new o(e);case cu:return nu(e);case lu:return new o;case du:return su(e)}}function bu(e){return typeof e.constructor=="function"&&!Jn(e)?sa(Ni(e)):{}}var xu="[object Map]";function ku(e){return ft(e)&&pe(e)==xu}var bn=ze&&ze.isMap,Tu=bn?Gt(bn):ku,Nu="[object Set]";function vu(e){return ft(e)&&pe(e)==Nu}var xn=ze&&ze.isSet,Ru=xn?Gt(xn):vu,rs="[object Arguments]",Su="[object Array]",_u="[object Boolean]",Pu="[object Date]",Ou="[object Error]",as="[object Function]",Iu="[object GeneratorFunction]",Lu="[object Map]",Mu="[object Number]",is="[object Object]",$u="[object RegExp]",ju="[object Set]",Wu="[object String]",Hu="[object Symbol]",zu="[object WeakMap]",Vu="[object ArrayBuffer]",Uu="[object DataView]",Ku="[object Float32Array]",qu="[object Float64Array]",Gu="[object Int8Array]",Yu="[object Int16Array]",Xu="[object Int32Array]",Zu="[object Uint8Array]",Ju="[object Uint8ClampedArray]",Qu="[object Uint16Array]",ec="[object Uint32Array]",z={};z[rs]=z[Su]=z[Vu]=z[Uu]=z[_u]=z[Pu]=z[Ku]=z[qu]=z[Gu]=z[Yu]=z[Xu]=z[Lu]=z[Mu]=z[is]=z[$u]=z[ju]=z[Wu]=z[Hu]=z[Zu]=z[Ju]=z[Qu]=z[ec]=!0;z[Ou]=z[as]=z[zu]=!1;function mt(e,t,n,o,r,s){var a;if(a!==void 0)return a;if(!bt(e))return e;var u=qt(e);if(u)a=Qi(e);else{var l=pe(e),c=l==as||l==Iu;if(ts(e))return Li(e);if(l==is||l==rs||c&&!r)a=c?{}:bu(e);else{if(!z[l])return r?e:{};a=Fu(e,l)}}s||(s=new qe);var f=s.get(e);if(f)return f;s.set(e,a),Ru(e)?e.forEach(function(C){a.add(mt(C,t,n,C,e,s))}):Tu(e)&&e.forEach(function(C,m){a.set(m,mt(C,t,n,m,e,s))});var d=Vi,p=u?void 0:d(e);return oa(p||e,function(C,m){p&&(m=C,C=e[m]),fa(a,m,mt(C,t,n,m,e,s))}),a}var tc=1,nc=4;function dt(e){return mt(e,tc|nc)}const sc=(e,t={})=>{i.withoutNormalizing(e,()=>{const{reverse:n=!1,unit:o="character",distance:r=1,voids:s=!1}=t;let{at:a=dt(e.selection),hanging:u=!1}=t;if(!a)return;let l=!1;if(O.isRange(a)&&A.isCollapsed(a)&&(l=!0,a=a.anchor),O.isPoint(a)){const S=i.void(e,{at:a,mode:"highest"});if(!s&&S){const[,W]=S;a=W}else{const W={unit:o,distance:r},v=n?i.before(e,a,W)||i.start(e,[]):i.after(e,a,W)||i.end(e,[]);a={anchor:a,focus:v},u=!0}}if(O.isPath(a)){b.removeNodes(e,{at:a,voids:s});return}if(A.isCollapsed(a))return;if(!u){const[,S]=A.edges(a),W=i.end(e,[]);V.equals(S,W)||(a=i.unhangRange(e,a,{voids:s}))}let[c,f]=A.edges(a);const d=i.above(e,{match:S=>h.isElement(S)&&i.isBlock(e,S),at:c,voids:s}),p=i.above(e,{match:S=>h.isElement(S)&&i.isBlock(e,S),at:f,voids:s}),C=d&&p&&!g.equals(d[1],p[1]),m=g.equals(c.path,f.path),E=s?null:i.void(e,{at:c,mode:"highest"})??i.elementReadOnly(e,{at:c,mode:"highest"}),D=s?null:i.void(e,{at:f,mode:"highest"})??i.elementReadOnly(e,{at:f,mode:"highest"});if(E){const S=i.before(e,c);S&&d&&g.isAncestor(d[1],S.path)&&(c=S)}if(D){const S=i.after(e,f);S&&p&&g.isAncestor(p[1],S.path)&&(f=S)}const F=[];let y;for(const S of i.nodes(e,{at:a,voids:s})){const[W,v]=S;y&&g.compare(v,y)===0||(!s&&h.isElement(W)&&(i.isVoid(e,W)||i.isElementReadOnly(e,W))||!g.isCommon(v,c.path)&&!g.isCommon(v,f.path))&&(F.push(S),y=v)}const k=Array.from(F,([,S])=>i.pathRef(e,S)),N=i.pointRef(e,c),x=i.pointRef(e,f);let R="";if(!m&&!E){const S=N.current,[W]=i.leaf(e,S),{path:v}=S,{offset:M}=c,q=W.text.slice(M);q.length>0&&(e.apply({type:"remove_text",path:v,offset:M,text:q}),R=q)}if(k.reverse().map(S=>S.unref()).filter(S=>S!==null).forEach(S=>b.removeNodes(e,{at:S,voids:s})),!D){const S=x.current,[W]=i.leaf(e,S),{path:v}=S,M=m?c.offset:0,q=W.text.slice(M,f.offset);q.length>0&&(e.apply({type:"remove_text",path:v,offset:M,text:q}),R=q)}!m&&C&&x.current&&N.current&&b.mergeNodes(e,{at:x.current,hanging:!0,voids:s}),l&&n&&o==="character"&&R.length>1&&R.match(/[\u0980-\u09FF\u0E00-\u0E7F\u1000-\u109F\u0900-\u097F\u1780-\u17FF\u0D00-\u0D7F\u0B00-\u0B7F\u0A00-\u0A7F\u0B80-\u0BFF\u0C00-\u0C7F]+/)&&b.insertText(e,R.slice(0,R.length-r));const K=N.unref(),I=x.unref(),ie=n?K||I:I||K;t.at==null&&ie&&b.select(e,ie)})},oc=(e,t,n={})=>{i.withoutNormalizing(e,()=>{const{hanging:o=!1,voids:r=!1}=n;let{at:s=Vt(e)}=n;const{batchDirty:a=!0}=n;if(!t.length)return;if(O.isRange(s))if(o||(s=i.unhangRange(e,s,{voids:r})),A.isCollapsed(s))s=s.anchor;else{const[,v]=A.edges(s);if(!r&&i.void(e,{at:v}))return;const M=i.pointRef(e,v);b.delete(e,{at:s}),s=M.unref()}else O.isPath(s)&&(s=i.start(e,s));if(!r&&i.void(e,{at:s}))return;const u=i.above(e,{at:s,match:v=>h.isElement(v)&&i.isInline(e,v),mode:"highest",voids:r});if(u){const[,v]=u;i.isEnd(e,s,v)?s=i.after(e,v):i.isStart(e,s,v)&&(s=i.before(e,v))}const l=i.above(e,{match:v=>h.isElement(v)&&i.isBlock(e,v),at:s,voids:r}),[,c]=l,f=i.isStart(e,s,c),d=i.isEnd(e,s,c),p=f&&d,[,C]=h.first({children:t},[]),[,m]=h.last({children:t},[]),E=([v,M])=>M.length===0?!1:p?!0:!(!f&&g.isAncestor(M,C)&&h.isElement(v)&&!e.isVoid(v)&&!e.isInline(v)||!d&&g.isAncestor(M,m)&&h.isElement(v)&&!e.isVoid(v)&&!e.isInline(v));let D=!0;const F=[],y=[],k=[];for(const v of h.nodes({children:t},{pass:E})){const[M,q]=v;D&&h.isElement(M)&&!e.isInline(M)&&!g.isAncestor(q,C)&&(D=!1),E(v)&&(h.isElement(M)&&!e.isInline(M)?(D=!1,y.push(M)):D?F.push(M):k.push(M))}const[N]=i.nodes(e,{at:s,match:v=>h.isText(v)||i.isInline(e,v),mode:"highest",voids:r}),[,x]=N,R=i.isStart(e,s,x),K=i.isEnd(e,s,x),I=i.pathRef(e,d&&!k.length?g.next(c):c),ie=i.pathRef(e,K?g.next(x):x),S=k.length>0;b.splitNodes(e,{at:s,match:v=>S?h.isElement(v)&&i.isBlock(e,v):h.isText(v)||i.isInline(e,v),mode:S?"lowest":"highest",always:S&&(!f||F.length>0)&&(!d||k.length>0),voids:r});const W=i.pathRef(e,!R||R&&K?g.next(x):x);if(b.insertNodes(e,F,{at:W.current,match:v=>h.isText(v)||i.isInline(e,v),mode:"highest",voids:r,batchDirty:a}),p&&!F.length&&y.length&&!k.length&&b.delete(e,{at:c,voids:r}),b.insertNodes(e,y,{at:I.current,match:v=>h.isElement(v)&&i.isBlock(e,v),mode:"lowest",voids:r,batchDirty:a}),b.insertNodes(e,k,{at:ie.current,match:v=>h.isText(v)||i.isInline(e,v),mode:"highest",voids:r,batchDirty:a}),!n.at){let v;if(k.length>0&&ie.current?v=g.previous(ie.current):y.length>0&&I.current?v=g.previous(I.current):W.current&&(v=g.previous(W.current)),v){const M=i.end(e,v);b.select(e,M)}}W.unref(),I.unref(),ie.unref()})},rc=(e,t={})=>{const{edge:n="anchor"}=t,{selection:o}=e;if(o){if(n==="anchor")b.select(e,o.anchor);else if(n==="focus")b.select(e,o.focus);else if(n==="start"){const[r]=A.edges(o);b.select(e,r)}else if(n==="end"){const[,r]=A.edges(o);b.select(e,r)}}else return},ac=e=>{const{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},ic=(e,t={})=>{const{selection:n}=e,{distance:o=1,unit:r="character",reverse:s=!1}=t;let{edge:a=null}=t;if(!n)return;a==="start"&&(a=A.isBackward(n)?"focus":"anchor"),a==="end"&&(a=A.isBackward(n)?"anchor":"focus");const{anchor:u,focus:l}=n,c={distance:o,unit:r},f={};if(a==null||a==="anchor"){const d=s?i.before(e,u,c):i.after(e,u,c);d&&(f.anchor=d)}if(a==null||a==="focus"){const d=s?i.before(e,l,c):i.after(e,l,c);d&&(f.focus=d)}b.setSelection(e,f)},uc=(e,t)=>{const{selection:n}=e;if(t=i.range(e,t),n){b.setSelection(e,t);return}if(!O.isRange(t))throw new Error(`When setting the selection and the current selection is \`null\` you must provide at least an \`anchor\` and \`focus\`, but you passed: ${te.stringify(t)}`);e.apply({type:"set_selection",properties:n,newProperties:t})},cc=(e,t,n={})=>{const{selection:o}=e;let{edge:r="both"}=n;if(!o)return;r==="start"&&(r=A.isBackward(o)?"focus":"anchor"),r==="end"&&(r=A.isBackward(o)?"anchor":"focus");const{anchor:s,focus:a}=o,u=r==="anchor"?s:a;b.setSelection(e,{[r==="anchor"?"anchor":"focus"]:{...u,...t}})},lc=(e,t)=>{const{selection:n}=e,o={},r={};if(n){for(const s in t)(s==="anchor"&&t.anchor!=null&&!V.equals(t.anchor,n.anchor)||s==="focus"&&t.focus!=null&&!V.equals(t.focus,n.focus)||s!=="anchor"&&s!=="focus"&&t[s]!==n[s])&&(o[s]=n[s],r[s]=t[s]);Object.keys(o).length>0&&e.apply({type:"set_selection",properties:o,newProperties:r})}},fc=(e,t,n={})=>{i.withoutNormalizing(e,()=>{const{hanging:o=!1,voids:r=!1,mode:s="lowest",batchDirty:a=!0}=n;let{at:u,match:l,select:c}=n;if(h.isNode(t)&&(t=[t]),t.length===0)return;const[f]=t;if(u||(u=Vt(e),c!==!1&&(c=!0)),c==null&&(c=!1),O.isRange(u))if(o||(u=i.unhangRange(e,u,{voids:r})),A.isCollapsed(u))u=u.anchor;else{const[,C]=A.edges(u),m=i.pointRef(e,C);b.delete(e,{at:u}),u=m.unref()}if(O.isPoint(u)){l==null&&(h.isText(f)?l=m=>h.isText(m):e.isInline(f)?l=m=>h.isText(m)||i.isInline(e,m):l=m=>h.isElement(m)&&i.isBlock(e,m));const[C]=i.nodes(e,{at:u.path,match:l,mode:s,voids:r});if(C){const[,m]=C,E=i.pathRef(e,m),D=i.isEnd(e,u,m);b.splitNodes(e,{at:u,match:l,mode:s,voids:r});const F=E.unref();u=D?g.next(F):F}else return}const d=g.parent(u);let p=u[u.length-1];if(!(!r&&i.void(e,{at:d}))){if(a){const C=[],m=g.levels(d);xo(e,()=>{for(const E of t){const D=d.concat(p);p++;const F={type:"insert_node",path:D,node:E};e.apply(F),u=g.next(u),C.push(F),h.isText(E)?m.push(D):m.push(...Array.from(h.nodes(E),([,y])=>D.concat(y)))}},()=>{Kn(e,m,E=>{let D=E;for(const F of C)if(g.operationCanTransformPath(F)&&(D=g.transform(D,F),!D))return null;return D})})}else for(const C of t){const m=d.concat(p);p++,e.apply({type:"insert_node",path:m,node:C}),u=g.next(u)}if(u=g.previous(u),c){const C=i.end(e,u);C&&b.select(e,C)}}})},dc=(e,t={})=>{i.withoutNormalizing(e,()=>{const{at:n=e.selection,mode:o="lowest",voids:r=!1}=t;let{match:s}=t;if(!n)return;s==null&&(s=O.isPath(n)?Ue(e,n):l=>h.isElement(l)&&i.isBlock(e,l));const a=i.nodes(e,{at:n,match:s,mode:o,voids:r}),u=Array.from(a,([,l])=>i.pathRef(e,l));for(const l of u){const c=l.unref();if(c.length<2)throw new Error(`Cannot lift node at a path [${c}] because it has a depth of less than \`2\`.`);const f=i.node(e,g.parent(c)),[d,p]=f,C=c[c.length-1],{length:m}=d.children;if(m===1){const E=g.next(p);b.moveNodes(e,{at:c,to:E,voids:r}),b.removeNodes(e,{at:p,voids:r})}else if(C===0)b.moveNodes(e,{at:c,to:p,voids:r});else if(C===m-1){const E=g.next(p);b.moveNodes(e,{at:c,to:E,voids:r})}else{const E=g.next(c),D=g.next(p);b.splitNodes(e,{at:E,voids:r}),b.moveNodes(e,{at:c,to:D,voids:r})}}})},us=(e,t)=>t!==e&&(h.isText(t)||i.isVoid(e,t)||t.children.length===1&&us(e,t.children[0])),hc=(e,t={})=>{i.withoutNormalizing(e,()=>{let{match:n,at:o=e.selection}=t;const{hanging:r=!1,voids:s=!1,mode:a="lowest"}=t;if(!o)return;if(n==null)if(O.isPath(o)){const[x]=i.parent(e,o);n=R=>x.children.includes(R)}else n=x=>h.isElement(x)&&i.isBlock(e,x);if(!r&&O.isRange(o)&&(o=i.unhangRange(e,o,{voids:s})),O.isRange(o))if(A.isCollapsed(o))o=o.anchor;else{const[,x]=A.edges(o),R=i.pointRef(e,x);b.delete(e,{at:o}),o=R.unref(),t.at==null&&b.select(e,o)}const[u]=i.nodes(e,{at:o,match:n,voids:s,mode:a}),l=i.previous(e,{at:o,match:n,voids:s,mode:a});if(!u||!l)return;const[c,f]=u,[d,p]=l;if(f.length===0||p.length===0)return;const C=g.next(p),m=g.common(f,p),E=g.isSibling(f,p),D=Array.from(i.levels(e,{at:f}),([x])=>x).slice(m.length).slice(0,-1),F=i.above(e,{at:f,mode:"highest",match:x=>D.includes(x)&&us(e,x)}),y=F&&i.pathRef(e,F[1]);let k,N;if(h.isText(c)&&h.isText(d)){const{text:x,...R}=c;N=d.text.length,k=R}else if(h.isElement(c)&&h.isElement(d)){const{children:x,...R}=c;N=d.children.length,k=R}else throw new Error(`Cannot merge the node at path [${f}] with the previous sibling because it is not the same kind: ${te.stringify(c)} ${te.stringify(d)}`);E||b.moveNodes(e,{at:f,to:C,voids:s}),y&&b.removeNodes(e,{at:y.current,voids:s}),i.shouldMergeNodesRemovePrevNode(e,l,u)?b.removeNodes(e,{at:p,voids:s}):e.apply({type:"merge_node",path:C,position:N,properties:k}),y&&y.unref()})},pc=(e,t)=>{i.withoutNormalizing(e,()=>{const{to:n,at:o=e.selection,mode:r="lowest",voids:s=!1}=t;let{match:a}=t;if(!o)return;a==null&&(a=O.isPath(o)?Ue(e,o):f=>h.isElement(f)&&i.isBlock(e,f));const u=i.pathRef(e,n),l=i.nodes(e,{at:o,match:a,mode:r,voids:s}),c=Array.from(l,([,f])=>i.pathRef(e,f));for(const f of c){const d=f.unref(),p=u.current;d.length!==0&&e.apply({type:"move_node",path:d,newPath:p}),u.current&&g.isSibling(p,d)&&g.isAfter(p,d)&&(u.current=g.next(u.current))}u.unref()})},gc=(e,t={})=>{i.withoutNormalizing(e,()=>{const{hanging:n=!1,voids:o=!1,mode:r="lowest"}=t;let{at:s=e.selection,match:a}=t;if(!s)return;a==null&&(a=O.isPath(s)?Ue(e,s):c=>h.isElement(c)&&i.isBlock(e,c)),!n&&O.isRange(s)&&(s=i.unhangRange(e,s,{voids:o}));const u=i.nodes(e,{at:s,match:a,mode:r,voids:o}),l=Array.from(u,([,c])=>i.pathRef(e,c));for(const c of l){const f=c.unref();if(f){const[d]=i.node(e,f);e.apply({type:"remove_node",path:f,node:d})}}})},Cc=(e,t,n={})=>{i.withoutNormalizing(e,()=>{let{match:o,at:r=dt(e.selection),compare:s}=n;const{merge:a}=n,{hanging:u=!1,mode:l="lowest",split:c=!1,voids:f=!1}=n;if(r){if(o==null&&(o=O.isPath(r)?Ue(e,r):d=>h.isElement(d)&&i.isBlock(e,d)),!u&&O.isRange(r)&&(r=i.unhangRange(e,r,{voids:f})),c&&O.isRange(r)){if(A.isCollapsed(r)&&i.leaf(e,r.anchor)[0].text.length>0)return;const d=i.rangeRef(e,r,{affinity:"inward"}),[p,C]=A.edges(r),m=l==="lowest"?"lowest":"highest",E=i.isEnd(e,C,C.path);b.splitNodes(e,{at:C,match:o,mode:m,voids:f,always:!E});const D=i.isStart(e,p,p.path);b.splitNodes(e,{at:p,match:o,mode:m,voids:f,always:!D}),r=d.unref(),n.at==null&&b.select(e,r)}s||(s=(d,p)=>d!==p);for(const[d,p]of i.nodes(e,{at:r,match:o,mode:l,voids:f})){const C={},m={};if(p.length===0)continue;let E=!1;for(const D in t)D==="children"||D==="text"||s(t[D],d[D])&&(E=!0,Object.prototype.hasOwnProperty.call(d,D)&&(C[D]=d[D]),a?t[D]!=null&&(m[D]=a(d[D],t[D])):t[D]!=null&&(m[D]=t[D]));E&&e.apply({type:"set_node",path:p,properties:C,newProperties:m})}}})},mc=(e,t)=>{if(A.isCollapsed(t))return t.anchor;{const[,n]=A.edges(t),o=i.pointRef(e,n);return b.delete(e,{at:t}),o.unref()}},Bc=(e,t={})=>{i.withoutNormalizing(e,()=>{const{mode:n="lowest",voids:o=!1}=t;let{match:r,at:s=dt(e.selection),height:a=0,always:u=!1}=t;if(!s||(r==null&&(r=f=>h.isElement(f)&&i.isBlock(e,f)),O.isRange(s)&&(s=mc(e,s),!s)))return;if(O.isPath(s)){const f=s,d=i.point(e,f),[p]=i.parent(e,f);r=C=>C===p,a=d.path.length-f.length+1,s=d,u=!0}const l=i.pointRef(e,s,{affinity:"backward"});let c;try{const[f]=i.nodes(e,{at:s,match:r,mode:n,voids:o});if(!f)return;const d=i.void(e,{at:s,mode:"highest"}),p=0;if(!o&&d){const[F,y]=d;if(h.isElement(F)&&e.isInline(F)){let N=i.after(e,y);if(!N){const x={text:""},R=g.next(y);b.insertNodes(e,x,{at:R,voids:o}),N=i.point(e,R)}s=N,u=!0}a=s.path.length-y.length+1,u=!0}c=i.pointRef(e,s);const C=s.path.length-a,[,m]=f,E=s.path.slice(0,C);let D=a===0?s.offset:s.path[C]+p;for(const[F,y]of i.levels(e,{at:E,reverse:!0,voids:o})){let k=!1;if(y.length<m.length||y.length===0||!o&&h.isElement(F)&&i.isVoid(e,F))break;const N=l.current,x=i.isEnd(e,N,y);if(u||!l||!i.isEdge(e,N,y)){k=!0;const R=h.extractProps(F);e.apply({type:"split_node",path:y,position:D,properties:R})}D=y[y.length-1]+(k||x?1:0)}if(t.at==null){const F=c.current||i.end(e,[]);b.select(e,F)}}finally{l.unref(),c?.unref()}})},Ec=(e,t,n={})=>{Array.isArray(t)||(t=[t]);const o={};for(const r of t)o[r]=null;b.setNodes(e,o,n)},Dc=(e,t={})=>{i.withoutNormalizing(e,()=>{const{mode:n="lowest",split:o=!1,voids:r=!1}=t;let{at:s=dt(e.selection),match:a}=t;if(!s)return;a==null&&(a=O.isPath(s)?Ue(e,s):f=>h.isElement(f)&&i.isBlock(e,f)),O.isPath(s)&&(s=i.range(e,s));const u=O.isRange(s)?i.rangeRef(e,s):null,l=i.nodes(e,{at:s,match:a,mode:n,voids:r}),c=Array.from(l,([,f])=>i.pathRef(e,f)).reverse();for(const f of c){const d=f.unref(),[p]=i.node(e,d);let C=i.range(e,d);o&&u&&(C=A.intersection(u.current,C)),b.liftNodes(e,{at:C,match:m=>!h.isText(p)&&p.children.includes(m),voids:r})}u&&u.unref()})},wc=(e,t,n={})=>{i.withoutNormalizing(e,()=>{const{mode:o="lowest",split:r=!1,voids:s=!1}=n;let{match:a,at:u=dt(e.selection)}=n;if(!u)return;if(a==null&&(O.isPath(u)?a=Ue(e,u):e.isInline(t)?a=c=>h.isElement(c)&&i.isInline(e,c)||h.isText(c):a=c=>h.isElement(c)&&i.isBlock(e,c)),r&&O.isRange(u)){const[c,f]=A.edges(u),d=i.rangeRef(e,u,{affinity:"inward"}),p=C=>{const m=i.above(e,{at:C,match:E=>h.isElement(E)&&i.isBlock(e,E)});return m&&i.isEdge(e,C,m[1])};b.splitNodes(e,{at:f,match:a,voids:s,always:!p(f)}),b.splitNodes(e,{at:c,match:a,voids:s,always:!p(c)}),u=d.unref(),n.at==null&&b.select(e,u)}const l=Array.from(i.nodes(e,{at:u,match:e.isInline(t)?c=>h.isElement(c)&&i.isBlock(e,c):c=>i.isEditor(c),mode:"lowest",voids:s}));for(const[,c]of l){const f=A.isRange(u)?A.intersection(u,i.range(e,c)):u;if(!f)continue;const d=Array.from(i.nodes(e,{at:f,match:a,mode:o,voids:s}));if(d.length>0){const[p]=d,C=d[d.length-1],[,m]=p,[,E]=C;if(m.length===0&&E.length===0)continue;const D=g.equals(m,E)?g.parent(m):g.common(m,E),F=i.range(e,m,E),y=i.node(e,D),[k]=y,N=D.length+1,x=g.next(E.slice(0,N)),R={...t,children:[]};b.insertNodes(e,R,{at:x,voids:s}),b.moveNodes(e,{at:F,match:K=>!h.isText(k)&&k.children.includes(K),to:x.concat(0),voids:s})}}})},Vl=()=>{const e=Ws({children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:(...n)=>ko(e,...n),addMark:(...n)=>_o(e,...n),deleteBackward:(...n)=>Io(e,...n),deleteForward:(...n)=>Lo(e,...n),deleteFragment:(...n)=>Mo(e,...n),getFragment:(...n)=>No(e,...n),insertBreak:(...n)=>Yo(e,...n),insertSoftBreak:(...n)=>Zo(e,...n),insertFragment:(...n)=>oc(e,...n),insertNode:(...n)=>Xo(e,...n),insertText:(...n)=>Jo(e,...n),normalizeNode:(...n)=>vo(e,...n),removeMark:(...n)=>br(e,...n),getDirtyPaths:(...n)=>To(e,...n),shouldNormalize:(...n)=>Ro(e,...n),above:(...n)=>So(e,...n),after:(...n)=>Po(e,...n),before:(...n)=>Oo(e,...n),collapse:(...n)=>rc(e,...n),delete:(...n)=>sc(e,...n),deselect:(...n)=>ac(e,...n),edges:(...n)=>$o(e,...n),elementReadOnly:(...n)=>jo(e,...n),end:(...n)=>Wo(e,...n),first:(...n)=>Ho(e,...n),fragment:(...n)=>zo(e,...n),getMarks:(...n)=>ur(e,...n),hasBlocks:(...n)=>Uo(e,...n),hasInlines:(...n)=>Ko(e,...n),hasPath:(...n)=>qo(e,...n),hasTexts:(...n)=>Go(e,...n),insertNodes:(...n)=>fc(e,...n),isBlock:(...n)=>Qo(e,...n),isEdge:(...n)=>er(e,...n),isEmpty:(...n)=>tr(e,...n),isEnd:(...n)=>nr(e,...n),isNormalizing:(...n)=>sr(e,...n),isStart:(...n)=>or(e,...n),last:(...n)=>rr(e,...n),leaf:(...n)=>ar(e,...n),levels:(...n)=>ir(e,...n),liftNodes:(...n)=>dc(e,...n),mergeNodes:(...n)=>hc(e,...n),move:(...n)=>ic(e,...n),moveNodes:(...n)=>pc(e,...n),next:(...n)=>cr(e,...n),node:(...n)=>lr(e,...n),nodes:(...n)=>fr(e,...n),normalize:(...n)=>dr(e,...n),parent:(...n)=>hr(e,...n),path:(...n)=>Cr(e,...n),pathRef:(...n)=>pr(e,...n),pathRefs:(...n)=>gr(e,...n),point:(...n)=>Er(e,...n),pointRef:(...n)=>mr(e,...n),pointRefs:(...n)=>Br(e,...n),positions:(...n)=>Dr(e,...n),previous:(...n)=>wr(e,...n),range:(...n)=>Fr(e,...n),rangeRef:(...n)=>yr(e,...n),rangeRefs:(...n)=>Ar(e,...n),removeNodes:(...n)=>gc(e,...n),select:(...n)=>uc(e,...n),setNodes:(...n)=>Cc(e,...n),setNormalizing:(...n)=>xr(e,...n),setPoint:(...n)=>cc(e,...n),setSelection:(...n)=>lc(e,...n),splitNodes:(...n)=>Bc(e,...n),start:(...n)=>kr(e,...n),string:(...n)=>Tr(e,...n),unhangRange:(...n)=>Nr(e,...n),unsetNodes:(...n)=>Ec(e,...n),unwrapNodes:(...n)=>Dc(e,...n),void:(...n)=>Vo(e,...n),withoutNormalizing:(...n)=>vr(e,...n),wrapNodes:(...n)=>wc(e,...n),shouldMergeNodesRemovePrevNode:(...n)=>Rr(e,...n)}),t=ae([]);return Object.defineProperty(e,"children",{get(){return t.value},set(n){t.value=n}}),e},Xt=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,yc=e=>De(e)&&e.nodeType===8,fe=e=>De(e)&&e.nodeType===1,De=e=>{const t=Xt(e);return!!t&&(e instanceof t.Node||e instanceof globalThis.Node)},Lt=e=>{const t=e&&e.anchorNode&&Xt(e.anchorNode);return!!t&&e instanceof t.Selection},cs=e=>De(e)&&e.nodeType===3,Ac=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,Fc=e=>{let[t,n]=e;if(fe(t)&&t.childNodes.length){let o=n===t.childNodes.length,r=o?n-1:n;for([t,r]=ls(t,r,o?"backward":"forward"),o=r<n;fe(t)&&t.childNodes.length;){const s=o?t.childNodes.length-1:0;t=xc(t,s,o?"backward":"forward")}n=o&&t.textContent!=null?t.textContent.length:0}return[t,n]},bc=e=>{let t=e&&e.parentNode;for(;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},ls=(e,t,n)=>{const{childNodes:o}=e;let r=o[t],s=t,a=!1,u=!1;for(;(yc(r)||fe(r)&&r.childNodes.length===0||fe(r)&&r.getAttribute("contenteditable")==="false")&&!(a&&u);){if(s>=o.length){a=!0,s=t-1,n="backward";continue}if(s<0){u=!0,s=t+1,n="forward";continue}r=o[s],t=s,s+=n==="forward"?1:-1}for(;r.nodeType===3&&r.textContent==="";)t+=n==="forward"?1:-1,r=o[t];if(!r)throw new Error(`Compact on vue3 empty childNode: Failed to find adjacent nodes: ${te.stringify(r)}`);return[r,t]},xc=(e,t,n)=>{const[o]=ls(e,t,n);return o},fs=e=>{let t="";if(cs(e)&&e.nodeValue)return e.nodeValue;if(fe(e)){for(const o of Array.from(e.childNodes))t+=fs(o);const n=getComputedStyle(e).getPropertyValue("display");(n==="block"||n==="list"||e.tagName==="BR")&&(t+=`
`)}return t},kc=/data-slate-fragment="(.+?)"/m,Tc=e=>{const t=e.getData("text/html"),[,n]=t.match(kc)||[];return n},je=e=>e.getSelection!=null?e.getSelection():document.getSelection(),Nc=()=>{let e=document.activeElement;for(;e?.shadowRoot&&e.shadowRoot?.activeElement;)e=e?.shadowRoot?.activeElement;return e},kn=(e,t)=>!!(e.compareDocumentPosition(t)&globalThis.Node.DOCUMENT_POSITION_PRECEDING),vc=(e,t)=>!!(e.compareDocumentPosition(t)&globalThis.Node.DOCUMENT_POSITION_FOLLOWING),Tn=(e,t)=>{if(!e)return null;let n=e;for(;n;){if(n.matches&&n.matches(t))return n;if(n.parentElement)n=n.parentElement;else if(n.parentNode&&"host"in n.parentNode)n=n.parentNode.host;else return null}return null},Mt=(e,t)=>{if(!e||!t)return!1;if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;if(n.parentNode)"host"in n.parentNode?n=n.parentNode.host:n=n.parentNode;else return!1}return!1},Rc=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Nn=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ce=typeof navigator<"u"&&/Android/.test(navigator.userAgent),me=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Ae=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Sc=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Zt=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),ds=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),_c=ce&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Pc=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Oc=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Ic=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent)&&(!Zt||ds),Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&(navigator.userAgent.match(/Version\/(\d+)/)?.[1]&&parseInt(navigator.userAgent.match(/Version\/(\d+)/)?.[1],10)<17);const Ie=(!ds||!_c)&&!Sc&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";let Lc=0;class hs{id;constructor(){this.id=`${Lc++}`}}class Mc extends WeakMap{constructor(){super()}delete(t){return super.delete(Be(t))}get(t){return super.get(Be(t))}has(t){return super.has(Be(t))}set(t,n){return super.set(Be(t),n)}}const We=new WeakMap,st=new WeakMap,ps=new WeakMap,ot=new WeakMap,ct=new WeakMap,Ve=new WeakMap,At=new Mc,Tt=new WeakMap,$t=new WeakMap,Ee=new WeakMap,Me=new WeakMap,rt=new WeakMap,jt=new WeakMap,Ft=new WeakMap,Wt=Symbol("mark-placeholder");function Qe([e,t]){if(e.nodeType!==3||e.textContent!=="")return[e,t];{const n=e.previousSibling===null;let o=e[n?"nextSibling":"previousSibling"];for(;o?.firstChild;)o=n?o.firstChild:o.lastChild;if(!o)throw new Error(`Compact on vue3 empty childNode: Failed to find adjacent nodes: ${te.stringify(e)}`);return[o,n?0:o.textContent?.length||0]}}const w={blur:e=>{const t=w.toDOMNode(e,e),n=w.findDocumentOrShadowRoot(e);Ee.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{const{selection:t}=e,n=w.findDocumentOrShadowRoot(e),o=je(n);o&&o.rangeCount>0&&o.removeAllRanges(),t&&b.deselect(e)},findDocumentOrShadowRoot:e=>{const t=w.toDOMNode(e,e),n=t.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);const{clientX:n,clientY:o,target:r}=t;if(n==null||o==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${t}`);const s=w.toSlateNode(e,t.target),a=w.findPath(e,s);if(h.isElement(s)&&i.isVoid(e,s)){const f=r.getBoundingClientRect(),d=e.isInline(s)?n-f.left<f.left+f.width-n:o-f.top<f.top+f.height-o,p=i.point(e,a,{edge:d?"start":"end"}),C=d?i.before(e,p):i.after(e,p);if(C)return i.range(e,C)}let u;const{document:l}=w.getWindow(e);if(l.caretRangeFromPoint)u=l.caretRangeFromPoint(n,o);else{const f=l.caretPositionFromPoint(n,o);f&&(u=l.createRange(),u.setStart(f.offsetNode,f.offset),u.setEnd(f.offsetNode,f.offset))}if(!u)throw new Error(`Cannot resolve a Slate range from a DOM event: ${t}`);return w.toSlateRange(e,u,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{let n=At.get(t);return n||(n=new hs,At.set(t,n)),n},findPath:(e,t)=>{const n=[];let o=t;for(;;){const r=st.get(o);if(r==null){if(o===e)return n;break}const s=We.get(o);if(s==null)break;n.unshift(s),o=r}throw new Error(`Unable to find the path for Slate node: ${te.stringify(t)}`)},focus:e=>{if(Ee.get(e)||!ot.get(e))return;const t=w.toDOMNode(e,e),n=w.findDocumentOrShadowRoot(e);if(n.activeElement!==t){if(e.selection&&n instanceof Document){const o=je(n),r=w.toDOMRange(e,e.selection);o?.removeAllRanges(),o?.addRange(r)}e.selection||b.select(e,i.start(e,[])),Ee.set(e,!0),t.focus({preventScroll:!0})}},getWindow:e=>{const t=ps.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:(e,t,n={})=>{const{editable:o=!1}=n,r=w.toDOMNode(e,e);let s;try{s=fe(t)?t:t.parentElement}catch(a){if(a instanceof Error&&!a.message.includes('Permission denied to access property "nodeType"'))throw a}return s?Tn(s,"[data-slate-editor]")===r&&(!o||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&Tn(s,'[contenteditable="false"]')===r||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>De(t)&&w.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{const{anchor:n,focus:o}=t;return i.hasPath(e,n.path)&&i.hasPath(e,o.path)},hasSelectableTarget:(e,t)=>w.hasEditableTarget(e,t)||w.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>De(t)&&w.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Me.get(e),isFocused:e=>!!Ee.get(e),isReadOnly:e=>!!$t.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if($t.get(e)||!w.hasTarget(e,t))return!1;const n=w.toSlateNode(e,t);return h.isElement(n)&&i.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{const n=t===e?ot.get(e):Tt.get(e)?.get(w.findKey(e,t));if(!n)throw new Error(`Cannot resolve a DOM node from Slate node: ${te.stringify(t)}`);return n},toDOMPoint:(e,t)=>{const[n]=i.node(e,t.path),o=w.toDOMNode(e,n);let r;i.void(e,{at:t})&&(t={path:t.path,offset:0});const a=Array.from(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]"));let u=0;for(let l=0;l<a.length;l++){const c=a[l],f=c.childNodes[0];if(f==null||f.textContent==null)continue;const{length:d}=f.textContent,p=c.getAttribute("data-slate-length"),C=p==null?d:parseInt(p,10),m=u+C,E=a[l+1];if(t.offset===m&&E?.hasAttribute("data-slate-mark-placeholder")){const D=E.childNodes[0];r=[D instanceof globalThis.Text?D:E,E.textContent?.startsWith("\uFEFF")?1:0];break}if(t.offset<=m){const D=Math.min(d,Math.max(0,t.offset-u));r=[f,D];break}u=m}if(!r)throw new Error(`Cannot resolve a DOM point from Slate point: ${te.stringify(t)}`);return r},toDOMRange:(e,t)=>{const{anchor:n,focus:o}=t,r=A.isBackward(t),s=w.toDOMPoint(e,n),a=A.isCollapsed(t)?s:w.toDOMPoint(e,o),l=w.getWindow(e).document.createRange(),[c,f]=r?a:s,[d,p]=r?s:a,m=!!(fe(c)?c:c.parentElement).getAttribute("data-slate-zero-width"),D=!!(fe(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return l.setStart(c,m?1:f),l.setEnd(d,D?1:p),l},toSlateNode:(e,t)=>{let n=fe(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));const o=n?ct.get(n):null;if(!o)throw new Error(`Cannot resolve a Slate node from DOM node: ${n}`);return o},toSlatePoint:(e,t,n)=>{const{exactMatch:o,suppressThrow:r,searchDirection:s}=n,[a,u]=Qe(o?t:Fc(t)),l=a.parentNode;let c=null,f=0;if(l){const C=w.toDOMNode(e,e),m=l.closest('[data-slate-void="true"]'),E=m&&Mt(C,m)?m:null,D=l.closest('[contenteditable="false"]'),F=D&&C.contains(D)?D:null;let y=l.closest("[data-slate-leaf]"),k=null;if(y){if(c=y.closest('[data-slate-node="text"]'),c){const x=w.getWindow(e).document.createRange();x.setStart(c,0),x.setEnd(a,u);const R=x.cloneContents();[...Array.prototype.slice.call(R.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(R.querySelectorAll("[contenteditable=false]"))].forEach(I=>{if(ce&&!o&&I.hasAttribute("data-slate-zero-width")&&I.textContent.length>0&&I.textContext!=="\uFEFF"){I.textContent.startsWith("\uFEFF")&&(I.textContent=I.textContent.slice(1));return}I.parentNode.removeChild(I)}),f=R.textContent.length,k=c}}else if(E){const N=E.querySelectorAll("[data-slate-leaf]");for(let x=0;x<N.length;x++){const R=N[x];if(w.hasDOMNode(e,R)){y=R;break}}y?(c=y.closest('[data-slate-node="text"]'),k=y,f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(x=>{f-=x.textContent.length})):f=1}else if(F){const N=R=>R?R.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],x=F.closest('[data-slate-node="element"]');(s==="backward"||!s)&&(y=[...N(x?.previousElementSibling),...N(x)].findLast(K=>kn(F,K))??null),(s==="forward"||!s)&&(y=[...N(x),...N(x?.nextElementSibling)].find(K=>vc(F,K))??null),y&&(c=y.closest('[data-slate-node="text"]'),k=y,s==="forward"?f=0:(f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(R=>{f-=R.textContent.length})))}k&&f===k.textContent.length&&ce&&k.getAttribute("data-slate-zero-width")==="z"&&k.textContent?.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||me&&k.textContent?.endsWith(`

`))&&f--}if(ce&&!c&&!o){const C=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(C&&w.hasDOMNode(e,C,{editable:!0})){const m=w.toSlateNode(e,C);let E;try{E=w.findPath(e,m)}catch(k){if(r)return null;throw k}const D=i.start(e,E),{path:F}=D;let{offset:y}=D;return C.querySelector("[data-slate-leaf]")||(y=u),{path:F,offset:y}}}if(!c){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${t}`)}const d=w.toSlateNode(e,c);let p;try{p=w.findPath(e,d)}catch(C){if(r)return null;throw C}return{path:p,offset:f}},toSlateRange:(e,t,n)=>{const{exactMatch:o,suppressThrow:r}=n,s=Lt(t)?t.anchorNode:t.startContainer;let a,u,l,c,f;if(s){if(Lt(t)){if(a=t.anchorNode,u=t.anchorOffset,l=t.focusNode,c=t.focusOffset,me)if((a instanceof HTMLElement?a.attributes:null)?.getNamedItem("data-slate-editor")){for(;a instanceof HTMLElement&&a.firstElementChild;)a=a.firstElementChild;for(;l instanceof HTMLElement&&l.lastElementChild;)l=l.lastElementChild;a=a?.firstChild,u=0,l=l?.lastChild,c=l?.textContent?.length||0}else{if(a){const[D,F]=Qe([a,u]);a=D,u=F}if(l){const[D,F]=Qe([l,c]);l=D,c=F}}if(!a||!l)return null;Zt&&bc(a)||me?f=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:f=t.isCollapsed}else if(a=t.startContainer,u=t.startOffset,l=t.endContainer,c=t.endOffset,f=t.collapsed,me){if(a){const[E,D]=Qe([a,u]);a=E,u=D}if(l){const[E,D]=Qe([l,c]);l=E,c=D}}}if(a==null||l==null||u==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${t}`);me&&l.textContent?.endsWith(`

`)&&c===l.textContent.length&&c--;const d=w.toSlatePoint(e,[a,u],{exactMatch:o,suppressThrow:r});if(!d)return null;const p=kn(a,l)||a===l&&c<u,C=f?d:w.toSlatePoint(e,[l,c],{exactMatch:o,suppressThrow:r,searchDirection:p?"forward":"backward"});if(!C)return null;let m={anchor:d,focus:C};return A.isExpanded(m)&&A.isForward(m)&&fe(l)&&i.void(e,{at:m.focus,mode:"highest"})&&(m=i.unhangRange(e,m,{voids:!0})),m}},vn=(e,t)=>{const n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},Rn=(e,t,n)=>{const o=w.toDOMRange(e,t).getBoundingClientRect(),r=w.toDOMRange(e,n).getBoundingClientRect();return vn(o,r)&&vn(r,o)},$c=(e,t)=>{const n=i.range(e,A.end(t)),o=Array.from(i.positions(e,{at:t}));let r=0,s=o.length,a=Math.floor(s/2);if(Rn(e,i.range(e,o[r]),n))return i.range(e,o[r],n);if(o.length<2)return i.range(e,o[o.length-1],n);for(;a!==o.length&&a!==r;)Rn(e,i.range(e,o[a]),n)?s=a:r=a,a=Math.floor((r+s)/2);return i.range(e,o[r],n)},Sn=new WeakMap,gs=(e,t)=>{const n=w.findKey(e,t);let o=Sn.get(n);return o||(o={type:"root",movedNodeKeys:new Set,children:[]},Sn.set(n,o)),o};class jc{root;chunkSize;debug;reachedEnd;pointerChunk;pointerIndex;pointerIndexStack;cachedPointerNode;constructor(t,{chunkSize:n,debug:o}){this.root=t,this.chunkSize=n,this.debug=o??!1,this.pointerChunk=t,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(t){this.returnToPreviousLeaf(),this.insertAfter(t),this.readLeaf()}insertAfter(t){if(t.length===0)return;let n=0,o=0;for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){const u=this.chunkSize-this.pointerSiblings.length,l=Math.min(u,t.length);if(l>0){const c=t.splice(0,l);this.rawInsertAfter(c,n)}this.exitChunk(),n++}if(t.length===0)return;const r=this.savePointer();let s=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){const u=this.chunkSize-this.pointerSiblings.length,l=Math.min(u,t.length);if(l>0){const c=t.splice(-l,l);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(c,o),s||(s=this.savePointer())}this.exitChunk(),o++}this.restorePointer(r);const a=Math.max(n,o);this.rawInsertAfter(t,a),s&&this.restorePointer(s),this.validateState()}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"&&(this.exitChunk(),this.remove()),this.validateState()}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;const t=this.getPointerNode();return this.cachedPointerNode=t,t}getChunkPath(t){const n=[];for(let o=t;o.type==="chunk";o=o.parent){const r=o.parent.children.indexOf(o);if(r===-1)return null;n.unshift(r)}return n}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(t){if(t==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}const{chunk:n,node:o}=t,r=n.children.indexOf(o);if(r===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");const s=this.getChunkPath(n);if(!s)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=n,this.pointerIndex=r,this.pointerIndexStack=s,this.reachedEnd=!1,this.cachedPointerNode=o,this.validateState()}enterChunk(t){if(this.pointerNode?.type!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=t?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(t){for(;this.pointerNode?.type==="chunk";)this.enterChunk(t)}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");const t=this.pointerChunk;this.pointerChunk=t.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(t,n){if(t.length===0)return;const o=(c,f,d)=>{if(d===1)return c;const p=[];for(let C=0;C<this.chunkSize;C++){const m=c.slice(C*d,(C+1)*d);if(m.length===0)break;const E={type:"chunk",key:new hs,parent:f,children:[]};E.children=o(m,E,d/this.chunkSize),p.push(E)}return p},r=this.pointerSiblings.length+t.length;let s=0;for(let c=this.chunkSize;c<r;c*=this.chunkSize)s++;const a=Math.max(s,n),u=Math.pow(this.chunkSize,a),l=o(t,this.pointerChunk,u);this.pointerSiblings.splice(this.pointerIndex+1,0,...l),this.pointerIndex+=l.length,this.cachedPointerNode=void 0,this.validateState()}validateState(){if(!this.debug)return;const t=o=>{if(o.type==="chunk"){const{parent:r,children:s}=o;if(!r.children.includes(o))throw new Error(`Debug: Chunk ${o.key.id} has an incorrect parent property`);s.forEach(t)}};if(this.root.children.forEach(t),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");const n=this.getChunkPath(this.pointerChunk);if(!n)throw new Error("Debug: The pointer chunk is not connected to the root");if(!g.equals(this.pointerIndexStack,n))throw new Error(`Debug: The cached index stack [${this.pointerIndexStack.join(", ")}] does not match the path of the pointer chunk [${n.join(", ")}]`)}}class Wc{editor;children;rawChildren;cachedKeys;pointerIndex;constructor(t,n){this.editor=t,this.children=[...n],this.rawChildren=Be(n),this.cachedKeys=new Array(n.length),this.pointerIndex=0}read(t){if(t===1)return[this.children[this.pointerIndex++]];const n=this.remaining(t);return this.pointerIndex+=t,n}remaining(t){return t===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+t)}get reachedEnd(){return this.pointerIndex>=this.rawChildren.length}lookAhead(t,n){const o=this.rawChildren.indexOf(Be(t),this.pointerIndex);if(o>-1)return o-this.pointerIndex;for(let r=this.pointerIndex;r<this.rawChildren.length;r++){const s=this.rawChildren[r];if(this.findKey(s,r)===n)return r-this.pointerIndex}return-1}toChunkLeaves(t,n){return t.map((o,r)=>({type:"leaf",node:o,key:this.findKey(o,n+r),index:n+r}))}findKey(t,n){const o=this.cachedKeys[n];if(o)return o;const r=w.findKey(this.editor,Be(t));return this.cachedKeys[n]=r,r}}const Hc=(e,t,{chunkTree:n,chunkSize:o,onInsert:r,onUpdate:s,onIndexChange:a,debug:u})=>{const l=new jc(n,{chunkSize:o,debug:u}),c=new Wc(e,t);let f;for(;f=l.readLeaf();){const d=c.lookAhead(f.node,f.key),p=d>0&&n.movedNodeKeys.has(f.key);if(d===-1||p){l.remove();continue}const C=c.pointerIndex,m=c.read(d+1),E=m.pop();if(m.length){const F=c.toChunkLeaves(m,C);if(l.insertBefore(F),r)for(let y=0;y<m.length;y++)r(m[y],C+y)}const D=c.pointerIndex-1;f.node!==E&&(f.node=E,s?.(E,D)),f.index!==D&&(f.index=D,a?.(E,D))}if(!c.reachedEnd){const d=c.remaining();if(d.length){const p=c.toChunkLeaves(d,c.pointerIndex);if(l.returnToPreviousLeaf(),l.insertAfter(p),r)for(let C=0;C<d.length;C++)r(d[C],c.pointerIndex+C)}}n.movedNodeKeys.clear()},Ul=(e,t="x-slate-fragment")=>{const n=e,{apply:o,onChange:r,deleteBackward:s,addMark:a,removeMark:u}=n;return Tt.set(n,new WeakMap),n.addMark=(l,c)=>{Ft.delete(n),a(l,c)},n.removeMark=l=>{Ft.delete(n),u(l)},n.deleteBackward=l=>{if(l!=="line")return s(l);if(n.selection&&A.isCollapsed(n.selection)){const c=i.above(n,{match:f=>h.isElement(f)&&i.isBlock(n,f),at:n.selection});if(c){const[,f]=c,d=i.range(n,f,n.selection.anchor),p=$c(n,d);A.isCollapsed(p)||b.delete(n,{at:p})}}},n.apply=l=>{if(l.type==="move_node"){const d=h.parent(n,l.path);if(!!n.getChunkSize(d)){const C=h.get(n,l.path),m=gs(n,d),E=w.findKey(n,C);m.movedNodeKeys.add(E)}}const c=[],f=[];switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{c.push(...Le(n,l.path));break}case"set_selection":{rt.get(n)?.unref(),rt.delete(n);break}case"insert_node":case"remove_node":{c.push(...Le(n,g.parent(l.path)));break}case"merge_node":{const d=g.previous(l.path);c.push(...Le(n,d));break}case"move_node":{const d=g.common(g.parent(l.path),g.parent(l.newPath));c.push(...Le(n,d));let p;g.isBefore(l.path,l.newPath)?(c.push(...Le(n,g.parent(l.path))),p=l.newPath):(c.push(...Le(n,g.parent(l.newPath))),p=l.path);const C=h.get(e,g.parent(p)),m=w.findKey(n,C),E=i.pathRef(n,g.parent(p));f.push([E,m]);break}}o(l);for(const[d,p]of c){const[C]=i.node(n,d);At.set(C,p)}for(const[d,p]of f){if(d.current){const[C]=i.node(n,d.current);At.set(C,p)}d.unref()}},n.setFragmentData=l=>{const{selection:c}=n;if(!c)return;const[f,d]=A.edges(c),p=i.void(n,{at:f.path}),C=i.void(n,{at:d.path});if(A.isCollapsed(c)&&!p)return;const m=w.toDOMRange(n,c);let E=m.cloneContents(),D=E.childNodes[0];if(E.childNodes.forEach(x=>{x.textContent&&x.textContent.trim()!==""&&(D=x)}),C){const[x]=C,R=m.cloneRange(),K=w.toDOMNode(n,x);R.setEndAfter(K),E=R.cloneContents()}if(p&&(D=E.querySelector("[data-slate-spacer]")),Array.from(E.querySelectorAll("[data-slate-zero-width]")).forEach(x=>{const R=x.getAttribute("data-slate-zero-width")==="n";x.textContent=R?`
`:""}),cs(D)){const x=D.ownerDocument.createElement("span");x.style.whiteSpace="pre",x.appendChild(D),E.appendChild(x),D=x}const F=n.getFragment(),y=JSON.stringify(F),k=window.btoa(encodeURIComponent(y));D.setAttribute("data-slate-fragment",k),l.setData(`application/${t}`,k);const N=E.ownerDocument.createElement("div");return N.appendChild(E),N.setAttribute("hidden","true"),E.ownerDocument.body.appendChild(N),l.setData("text/html",N.innerHTML),l.setData("text/plain",fs(N)),E.ownerDocument.body.removeChild(N),l},n.insertData=l=>{n.insertFragmentData(l)||n.insertTextData(l)},n.insertFragmentData=l=>{const c=l.getData(`application/${t}`)||Tc(l);if(c){const f=decodeURIComponent(window.atob(c)),d=JSON.parse(f);return n.insertFragment(d),!0}return!1},n.insertTextData=l=>{const c=l.getData("text/plain");if(c){const f=c.split(/\r\n|\r|\n/);let d=!1;for(const p of f)d&&b.splitNodes(n,{always:!0}),n.insertText(p),d=!0;return!0}return!1},n.getChunkSize=()=>null,n.onChange=l=>{const c=jt.get(n);c&&c(l),r(l)},n},Le=(e,t)=>{const n=[];for(const[o,r]of i.levels(e,{at:t})){const s=w.findKey(e,o);n.push([r,s])}return n};function zc(e,...t){return t.reduce((n,o)=>n.slice(0,o.start)+o.text+n.slice(o.end),e)}function Vc(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return n}function Uc(e,t,n){const o=Math.min(e.length,t.length,n);for(let r=0;r<o;r++)if(e.charAt(e.length-r-1)!==t.charAt(t.length-r-1))return r;return o}function Kc(e,t){const{start:n,end:o,text:r}=t,s=e.slice(n,o),a=Vc(s,r),u=Math.min(s.length-a,r.length-a),l=Uc(s,r,u),c={start:n+a,end:o-l,text:r.slice(a,r.length-l)};return c.start===c.end&&c.text.length===0?null:c}var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var le={},_n;function Gc(){if(_n)return le;_n=1,Object.defineProperty(le,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=1;r<20;r++)o["f"+r]=111+r;function s(p,C,m){C&&!("byKey"in C)&&(m=C,C=null),Array.isArray(p)||(p=[p]);var E=p.map(function(y){return l(y,C)}),D=function(k){return E.some(function(N){return c(N,k)})},F=m==null?D:D(m);return F}function a(p,C){return s(p,C)}function u(p,C){return s(p,{byKey:!0},C)}function l(p,C){var m=C&&C.byKey,E={};p=p.replace("++","+add");var D=p.split("+"),F=D.length;for(var y in t)E[t[y]]=!1;var k=!0,N=!1,x=void 0;try{for(var R=D[Symbol.iterator](),K;!(k=(K=R.next()).done);k=!0){var I=K.value,ie=I.endsWith("?")&&I.length>1;ie&&(I=I.slice(0,-1));var S=d(I),W=t[S];if(I.length>1&&!W&&!n[I]&&!o[S])throw new TypeError('Unknown modifier: "'+I+'"');(F===1||!W)&&(m?E.key=S:E.which=f(I)),W&&(E[W]=ie?null:!0)}}catch(v){N=!0,x=v}finally{try{!k&&R.return&&R.return()}finally{if(N)throw x}}return E}function c(p,C){for(var m in p){var E=p[m],D=void 0;if(E!=null&&(m==="key"&&C.key!=null?D=C.key.toLowerCase():m==="which"?D=E===91&&C.which===93?91:C.which:D=C[m],!(D==null&&E===!1)&&D!==E))return!1}return!0}function f(p){p=d(p);var C=o[p]||p.toUpperCase().charCodeAt(0);return C}function d(p){return p=p.toLowerCase(),p=n[p]||p,p}return le.default=s,le.isHotkey=s,le.isCodeHotkey=a,le.isKeyHotkey=u,le.parseHotkey=l,le.compareHotkey=c,le.toKeyCode=f,le.toKeyName=d,le}var Bt=Gc();const ql=qc(Bt),Yc={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Xc={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Zc={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},G=e=>{const t=Yc[e],n=Xc[e],o=Zc[e],r=t&&Bt.isHotkey(t),s=n&&Bt.isHotkey(n),a=o&&Bt.isHotkey(o);return u=>!!(r&&r(u)||Nn&&s&&s(u)||!Nn&&a&&a(u))},Y={isBold:G("bold"),isCompose:G("compose"),isMoveBackward:G("moveBackward"),isMoveForward:G("moveForward"),isDeleteBackward:G("deleteBackward"),isDeleteForward:G("deleteForward"),isDeleteLineBackward:G("deleteLineBackward"),isDeleteLineForward:G("deleteLineForward"),isDeleteWordBackward:G("deleteWordBackward"),isDeleteWordForward:G("deleteWordForward"),isExtendBackward:G("extendBackward"),isExtendForward:G("extendForward"),isExtendLineBackward:G("extendLineBackward"),isExtendLineForward:G("extendLineForward"),isItalic:G("italic"),isMoveLineBackward:G("moveLineBackward"),isMoveLineForward:G("moveLineForward"),isMoveWordBackward:G("moveWordBackward"),isMoveWordForward:G("moveWordForward"),isRedo:G("redo"),isSoftBreak:G("insertSoftBreak"),isSplitBlock:G("splitBlock"),isTransposeCharacter:G("transposeCharacter"),isUndo:G("undo")},Pn=e=>typeof e=="object"&&e!=null&&e.nodeType===1,On=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",ht=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return On(n.overflowY,t)||On(n.overflowX,t)||(o=>{const r=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(o);return!!r&&(r.clientHeight<o.scrollHeight||r.clientWidth<o.scrollWidth)})(e)}return!1},pt=(e,t,n,o,r,s,a,u)=>s<e&&a>t||s>e&&a<t?0:s<=e&&u<=n||a>=t&&u>=n?s-e-o:a>t&&u<n||s<e&&u>n?a-t+r:0,Jc=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},In=(e,t)=>{var n,o,r,s;if(typeof document>"u")return[];const{scrollMode:a,block:u,inline:l,boundary:c,skipOverflowHiddenElements:f}=t,d=typeof c=="function"?c:he=>he!==c;if(!Pn(e))throw new TypeError("Invalid target");const p=document.scrollingElement||document.documentElement,C=[];let m=e;for(;Pn(m)&&d(m);){if(m=Jc(m),m===p){C.push(m);break}m!=null&&m===document.body&&ht(m)&&!ht(document.documentElement)||m!=null&&ht(m,f)&&C.push(m)}const E=(o=(n=window.visualViewport)==null?void 0:n.width)!=null?o:innerWidth,D=(s=(r=window.visualViewport)==null?void 0:r.height)!=null?s:innerHeight,{scrollX:F,scrollY:y}=window,{height:k,width:N,top:x,right:R,bottom:K,left:I}=e.getBoundingClientRect(),{top:ie,right:S,bottom:W,left:v}=(he=>{const H=window.getComputedStyle(he);return{top:parseFloat(H.scrollMarginTop)||0,right:parseFloat(H.scrollMarginRight)||0,bottom:parseFloat(H.scrollMarginBottom)||0,left:parseFloat(H.scrollMarginLeft)||0}})(e);let M=u==="start"||u==="nearest"?x-ie:u==="end"?K+W:x+k/2-ie+W,q=l==="center"?I+N/2-v+S:l==="end"?R+S:I-v;const Ge=[];for(let he=0;he<C.length;he++){const H=C[he],{height:Te,width:Ne,top:ve,right:Ye,bottom:Xe,left:Re}=H.getBoundingClientRect();if(a==="if-needed"&&x>=0&&I>=0&&K<=D&&R<=E&&(H===p&&!ht(H)||x>=ve&&K<=Xe&&I>=Re&&R<=Ye))return Ge;const Se=getComputedStyle(H),_e=parseInt(Se.borderLeftWidth,10),B=parseInt(Se.borderTopWidth,10),T=parseInt(Se.borderRightWidth,10),_=parseInt(Se.borderBottomWidth,10);let P=0,L=0;const X="offsetWidth"in H?H.offsetWidth-H.clientWidth-_e-T:0,j="offsetHeight"in H?H.offsetHeight-H.clientHeight-B-_:0,$="offsetWidth"in H?H.offsetWidth===0?0:Ne/H.offsetWidth:0,Z="offsetHeight"in H?H.offsetHeight===0?0:Te/H.offsetHeight:0;if(p===H)P=u==="start"?M:u==="end"?M-D:u==="nearest"?pt(y,y+D,D,B,_,y+M,y+M+k,k):M-D/2,L=l==="start"?q:l==="center"?q-E/2:l==="end"?q-E:pt(F,F+E,E,_e,T,F+q,F+q+N,N),P=Math.max(0,P+y),L=Math.max(0,L+F);else{P=u==="start"?M-ve-B:u==="end"?M-Xe+_+j:u==="nearest"?pt(ve,Xe,Te,B,_+j,M,M+k,k):M-(ve+Te/2)+j/2,L=l==="start"?q-Re-_e:l==="center"?q-(Re+Ne/2)+X/2:l==="end"?q-Ye+T+X:pt(Re,Ye,Ne,_e,T+X,q,q+N,N);const{scrollLeft:se,scrollTop:oe}=H;P=Z===0?0:Math.max(0,Math.min(oe+P/Z,H.scrollHeight-Te/Z+j)),L=$===0?0:Math.max(0,Math.min(se+L/$,H.scrollWidth-Ne/$+X)),M+=oe-P,q+=se-L}Ge.push({el:H,top:P,left:L})}return Ge},Qc=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function el(e,t){if(!e.isConnected||!(r=>{let s=r;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;const n=(r=>{const s=window.getComputedStyle(r);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(e);if((r=>typeof r=="object"&&typeof r.behavior=="function")(t))return t.behavior(In(e,t));const o=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:r,top:s,left:a}of In(e,Qc(t))){const u=s-n.top+n.bottom,l=a-n.left+n.right;r.scroll({top:u,left:l,behavior:o})}}const ue=(e,t)=>{if(!t)return!1;e.stopImmediatePropagation();const n=t(e);return n??(e.defaultPrevented||!e.bubbles)},gt=e=>De(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),tl=(e,t)=>{if(!t)return!1;e.stopImmediatePropagation();const n=t(e);return n??e.defaultPrevented},Ln=(e,t)=>{t.inputType==="historyUndo"&&"undo"in e&&typeof e.undo=="function"&&e.undo(),t.inputType==="historyRedo"&&"redo"in e&&typeof e.redo=="function"&&e.redo()},nl=(e,t)=>{const n=!!e.selection&&A.isBackward(e.selection),o=t.cloneRange();if(o.collapse(n),o.getBoundingClientRect){const r=o.startContainer.parentElement,s=o.getBoundingClientRect();if(s.width===0&&s.height===0&&s.x===0&&s.y===0){const u=r.getBoundingClientRect();if(u.width>0||u.height>0)return}r.getBoundingClientRect=o.getBoundingClientRect.bind(o),el(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},sl=({element:e,attributes:t,children:n,editor:o})=>{const r=o?.isInline(e)?"span":"div";return Q(r,{...t,style:{position:"relative"}},n)},ol=({attributes:e,children:t})=>Q("span",e,t),rl=({attributes:e,children:t})=>Q("span",e,t),al=({children:e})=>e,il=({attributes:e,children:t})=>Q("span",e,[t,ce?Q("br"):void 0]),Cs=()=>[],ye=()=>{const e=ne(jn);if(e===void 0)throw new Error("The `useEditor` hook must be used inside the <Slate> component's context.");return e},ms=Symbol("SLATE_INNER_RENDER_DECORATE_FN"),ul=e=>{J(ms,e)},Bs=()=>{const e=ne(ms);if(e===void 0)throw new Error("The `injectDecorateFn` hook must be used inside the <Slate> component's context.");return e},Es=Symbol("SLATE_INNER_RENDER_DECORATE_RANGE"),Ds=e=>{const t=Bs(),n=ye(),o=ee(()=>{const r=w.findPath(n,e);return t([e,r])});J(Es,o)},cl=()=>{const e=ne(Es);if(e===void 0)throw new Error("The `injectInnerElementDR` hook must be used inside the <Element> component's context.");return e},ws=Symbol("SLATE_INNER_RENDER_ELEMENT"),ll=e=>J(ws,e),fl=()=>{const e=ne(ws);if(e===void 0)throw new Error("The `useRenderElement` hook must be used inside the <Slate> component's context.");return e},ys=Symbol("SLATE_INNER_RENDER_LEAF"),dl=e=>J(ys,e),hl=()=>{const e=ne(ys);if(e===void 0)throw new Error("The `useRenderLeaf` hook must be used inside the <Slate> component's context.");return e},As=Symbol("SLATE_INNER_RENDER_TEXT"),pl=e=>J(As,e),gl=()=>{const e=ne(As);if(e===void 0)throw new Error("The `useRenderText` hook must be used inside the <Slate> component's context.");return e},Fs=Symbol("SLATE_INNER_EDITOR_VERSION"),Cl=e=>J(Fs,e),ml=()=>{const e=ne(Fs);if(e===void 0)throw new Error("The `useEditorVersion` hook must be used inside the <Slate> component's context.");return e},bs=Symbol("SLATE_INNER_PLACEHOLDER"),Bl=e=>{J(bs,e)},El=()=>{const e=ne(bs);if(e===void 0)throw new Error("The `usePlaceholder` hook must be used inside the <Slate> component's context.");return e},xs=Symbol("SLATE_INNER_MARK_PLACEHOLDER"),Dl=e=>{J(xs,e)},wl=()=>{const e=ne(xs);if(e===void 0)throw new Error("The `useMarkPlaceholder` hook must be used inside the <Slate> component's context.");return e},ks=Symbol("SLATE_INNER_PLACEHOLDER_SHOW"),yl=e=>{J(ks,()=>e.value)},Al=()=>{const e=ne(ks);if(e===void 0)throw new Error("The `usePlaceholderShow` hook must be used inside the <Slate> component's context.");return e},Ts=Symbol("SLATE_INNER_PLACEHOLDER_RESIZE"),Fl=e=>{J(Ts,e)},bl=()=>{const e=ne(Ts);if(e===void 0)throw new Error("The `usePlaceholderResize` hook must be used inside the <Slate> component's context.");return e},Ns=Symbol("SLATE_INNER_RENDER_PLACEHOLDER"),xl=e=>J(Ns,e),kl=()=>{const e=ne(Ns);if(e===void 0)throw new Error("The `useRenderPlaceholder` hook must be used inside the <Slate> component's context.");return e},Tl=Symbol("SLATE_INNER_STATIC_CHUNK_ROOT"),Nl=e=>{J(Tl,e)},vs=Symbol("SLATE_INNER_RENDER_CHUNK"),vl=e=>J(vs,e),Rl=()=>{const e=ne(vs);if(e===void 0)throw new Error("The `useRenderChunk` hook must be used inside the <Slate> component's context.");return e},Gl=we({name:"slate-editor",emits:["change","selectionchange","valuechange"],props:{editor:{type:Object,require:!0},decorate:{type:Function,default:Cs},renderElement:{type:Function,default:sl},renderLeaf:{type:Function,default:ol},renderText:{type:Function,default:rl},renderChunk:{type:Function,default:al},renderPlaceholder:{type:Function,default:il}},setup(e,{slots:t,emit:n}){const{editor:o,decorate:r,renderElement:s,renderLeaf:a,renderPlaceholder:u,renderText:l,renderChunk:c}=e;if(!h.isNodeList(o.children))throw new Error(`[Slate] initialValue is invalid! Expected a list of elements but got: ${te.stringify(o.children)}`);J(jn,o),ul(r),ll(s),dl(a),pl(l),xl(u),vl(c);const f=ae(w.isFocused(o)),d=ee(()=>o.selection);J(Ks,f),J(Wn,ae(!1)),J(Hn,ae(!1)),J(qs,d);const p=()=>f.value=w.isFocused(o),C=ae(0);Cl(C);const m=ee(()=>{if(o.selection&&A.isCollapsed(o.selection)&&o.marks){const E=o.selection.anchor,D=h.leaf(o,E.path),{text:F,...y}=D;if(!Fe.equals(D,o.marks,{loose:!0})){const k=Object.fromEntries(Object.keys(y).map(N=>[N,null]));return{[Wt]:!0,...k,...o.marks,anchor:E,focus:E}}}return null});return Dl(m),at(()=>{document.addEventListener("focusin",p),document.addEventListener("focusout",p),jt.set(o,E=>{C.value++,n("change",E),o.operations.some(D=>D.type==="set_selection")&&n("selectionchange",E),o.operations.some(D=>D.type!=="set_selection")&&n("valuechange",E)})}),Et(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p),jt.delete(o)}),()=>Hs(t,"default")}}),Rs="---",Ss="A-Za-z--------",Sl=new RegExp("^[^"+Ss+"]*["+Rs+"]"),_l=new RegExp("^[^"+Rs+"]*["+Ss+"]");function _s(e){const t=String(e||"");return Sl.test(t)?"rtl":_l.test(t)?"ltr":"neutral"}const Pl=()=>{const e=ne(zt);if(e===void 0)throw new Error("The `useElement` hook must be used inside the <Slate> component's context.");return e},Yl=()=>ne(zt),Ps=Symbol("SLATE_INNER_RENDER_IS_LAST_EMPTY_BLOCK"),Os=e=>{const t=ye(),n=ee(()=>!t.isInline(e)&&h.string(e)==="");J(Ps,n)},Ol=()=>{const e=ne(Ps);if(e===void 0)throw new Error("The `injectIsLastEmptyBlock` hook must be used inside the <Element> component's context.");return e},Mn=we({name:"slate-string",props:["leaf","text","isLast"],setup(e){const t=ye(),n=Pl(),o=Ol();return()=>t.isVoid(n.value)?St({length:h.string(n.value).length}):e.leaf.text===""&&n.value.children.at(-1)===e.text&&o.value?St({isLineBreak:!0,isMarkPlaceholder:e.leaf[Wt]===!0}):e.leaf.text===""?St({isMarkPlaceholder:e.leaf[Wt]===!0}):e.isLast&&e.leaf.text.endsWith(`
`)?$n({isTrailing:!0,text:e.leaf.text}):$n({text:e.leaf.text})}}),$n=e=>Q("span",{"data-slate-string":!0},`${e.text??""}${e.isTrailing?`
`:""}`),St=e=>Q("span",{"data-slate-zero-width":e.isLineBreak?"n":"z","data-slate-length":e.length,"data-slate-mark-placeholder":e.isMarkPlaceholder?!0:void 0},[!ce||!e.isLineBreak?"\uFEFF":null,e.isLineBreak?Q("br"):null]),Il={position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Ae?"inherit":void 0},Ll=we({name:"slate-placeholder",setup(){const e=El(),t=bl(),n=ae(),o=ee(()=>({"data-slate-placeholder":!0,style:Il,contenteditable:!1,onVnodeMounted(s){s.el&&(n.value=new ResizeObserver(()=>{t(s.el?.getBoundingClientRect()?.height)}),n.value.observe(s.el))},onVnodeUnmounted(){n.value?.disconnect(),n.value=void 0,t()}})),r=kl();return()=>r({children:e.value,attributes:o.value})}}),Ml=we({name:"slate-leaf",props:["text","leaf","isLast","leafPosition"],setup(e){const{text:t,leaf:n,isLast:o,leafPosition:r}=e,s=hl(),a=Al();return()=>s({text:t,leaf:n,leafPosition:r,attributes:{"data-slate-leaf":!0},children:a()?[Q(Mn,{text:t,leaf:n,isLast:!0}),Q(Ll)]:Q(Mn,{text:t,leaf:n,isLast:o})})}}),Is=we({name:"slate-text",props:["text","isLast"],setup(e){const t=e.text,n=ye(),o=ae(),r=wl(),s=Bs(),a=cl(),u=ee(()=>{if(s===Cs)return[{leaf:t}];const d=w.findPath(n,t),p=s([t,d]),C=i.range(n,d);for(const E of a.value)p.push(A.intersection(E,C));r.value&&p.unshift(r.value);const m=p.filter(Boolean);return Fe.decorations(t,m.length?m:[])});at(()=>{const d=w.findKey(n,t);o.value&&(Tt.get(n)?.set(d,o.value),ct.set(o.value,t),Ve.set(t,o.value))}),Et(()=>{Ve.delete(t),o.value&&ct.delete(o.value)});const l=gl();let c=0;const f=ee(()=>Ht(u.value,(d,p)=>Q(Ml,{text:t,leaf:d.leaf,isLast:e.isLast&&p===u.value.length-1,leafPosition:d.position,key:c++})));return()=>l({text:t,attributes:{"data-slate-node":"text",ref:o},children:f.value})}}),Ls=()=>{const e=ne(Hn);if(e===void 0)throw new Error("The `useReadOnly` hook must be used inside the <Slate> component's context.");return e},$l={"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Ms=we({name:"slate-element",props:["element"],setup(e){const t=e.element,n=ye();J(zt,ee(()=>t));const o=ae(null);Dt(()=>o.value,c=>{const f=w.findKey(n,t),d=Tt.get(n);c?(d?.set(f,c),Ve.set(t,c),ct.set(c,t)):(d?.delete(f),Ve.delete(t))});const r=ee(()=>n.isInline(t)),s=Ls(),a=ee(()=>{const c={"data-slate-node":"element",ref:o};if(r.value)c["data-slate-inline"]=!0;else if(i.hasInlines(n,t)){const f=h.string(t),d=_s(f);d==="rtl"&&(c.dir=d)}return i.isVoid(n,t)&&(c["data-slate-void"]=!0,!s.value&&r.value&&(c.contenteditable=!1)),c});Ds(t),Os(t);const u=ee(()=>{if(!i.isVoid(n,t))return Q(js,{element:t});const[[c]]=h.texts(t);We.set(c,0),st.set(c,t);const f=r.value?"span":"div";return Q(f,$l,Q(Is,{text:c,isLast:!1}))});me&&zs(()=>{const c=o.value?.childNodes;if(!c?.length)return;const f=c.length-1;c[f].nodeType===3&&c[f].textContent!==""&&(c[f].textContent="")});const l=fl();return()=>l({attributes:a.value,children:u.value,element:t})}}),$s=(e,t,n)=>Ht(e.children,o=>o.type==="chunk"?t({highest:n===!0,lowest:o.children.some(r=>r.type==="leaf"),attributes:{"data-slate-chunk":!0,key:o.key.id},children:$s(o,t,!1)}):Q(Ms,{element:o.node,key:o.key.id})),js=we({name:"slate-children",props:["element"],setup(e){const t=ye(),n=e.element,o=h.isElement(n)&&!t.isInline(n),r=i.hasInlines(t,n)?null:t.getChunkSize(n);if(o||r===null)return Ds(n),Os(n),()=>Ht(n.children,(l,c)=>{We.set(l,c),st.set(l,n);const f=w.findKey(t,l);return h.isText(l)?Q(Is,{text:l,key:f.id,isLast:c===n.children.length-1}):Q(Ms,{element:l,key:f.id})});const s=gs(t,e.element),a=ae(0);Dt(n.children,()=>{a.value++,console.time("Reconcile children chunks"),Hc(t,n.children,{chunkTree:s,chunkSize:r,onInsert:(l,c)=>{We.set(l,c),st.set(l,n)},onUpdate:(l,c)=>{We.set(l,c),st.set(l,n)},onIndexChange:(l,c)=>{We.set(l,c)}}),console.timeEnd("Reconcile children chunks")},{deep:!1,immediate:!0}),Nl(s);const u=Rl();return()=>(a.value,$s(s,u,!0))}}),jl=()=>{const e=ne(Wn);if(e===void 0)throw new Error("The `useComposing` hook must be used inside the <Slate> component's context.");return e},Wl={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},Hl=e=>{const t=ye(),n=ae(),o=ae();let r=!1;at(()=>{n.value=new MutationObserver(l=>{n.value?.disconnect(),n.value?.takeRecords(),l.reverse().forEach(c=>{c.type!=="characterData"&&(c.removedNodes.forEach(f=>{c.target.insertBefore(f,c.nextSibling)}),c.addedNodes.forEach(f=>{c.target.removeChild(f)}))}),o.value?.(),o.value=void 0})});const s=(l,c)=>{r=!1,o.value=l},a=(l,c)=>{const f=h.leaf(t,l),d=Kc(f.text,c);d&&s(()=>{d.start!==d.end&&(d.text?i.deleteBackward(t,{unit:"word"}):i.deleteBackward(t,{unit:"character"})),i.insertText(t,d.text)})};return{handleDOMBeforeInput:l=>{n.value?.observe(e.value,Wl);const{inputType:c}=l;let f=null;const d=l.dataTransfer||l.data||void 0;r!==!1&&c!=="insertText"&&c!=="insertCompositionText"&&(r=!1);let[p]=l.getTargetRanges();p&&(f=w.toSlateRange(t,p,{exactMatch:!1,suppressThrow:!0}));const m=w.getWindow(t).getSelection();if(!f&&m&&(p=m,f=w.toSlateRange(t,m,{exactMatch:!1,suppressThrow:!0})),f=f??t.selection,!f)return;let E=!0;if(c.startsWith("delete")){const D=c.endsWith("Backward")?"backward":"forward";let[F,y]=A.edges(f),[k,N]=i.leaf(t,F.path);if(A.isExpanded(f)&&k.text.length===F.offset&&y.offset===0){const I=i.next(t,{at:F.path,match:h.isText});I&&g.equals(I[1],y.path)&&(D==="backward"?(f={anchor:y,focus:y},F=y,[k,N]=I):(f={anchor:F,focus:F},y=F))}const R=[{text:"",start:F.offset,end:y.offset}];if(zc(k.text,...R).length===0&&(E=!1),A.isExpanded(f)){if(E&&g.equals(f.anchor.path,f.focus.path)){const I={path:f.anchor.path,offset:F.offset};return i.range(t,I,I),a(f.anchor.path,{text:"",end:y.offset,start:F.offset})}return s(()=>b.delete(t,{at:f,reverse:D==="backward"}))}}switch(c){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return s(()=>i.deleteFragment(t));case"deleteContent":case"deleteContentForward":{const{anchor:D}=f;if(E&&A.isCollapsed(f)){const F=h.leaf(t,D.path);if(D.offset<F.text.length)return a(D.path,{text:"",start:D.offset,end:D.offset+1})}return s(()=>i.deleteForward(t))}case"deleteContentBackward":{const{anchor:D}=f,F=Lt(p)?p.isCollapsed:!!p?.collapsed;return E&&F&&A.isCollapsed(f)&&D.offset>0?a(D.path,{text:"",start:D.offset-1,end:D.offset}):s(()=>i.deleteBackward(t))}case"deleteEntireSoftLine":return s(()=>{i.deleteBackward(t,{unit:"line"}),i.deleteForward(t,{unit:"line"})});case"deleteHardLineBackward":return s(()=>i.deleteBackward(t,{unit:"block"}));case"deleteSoftLineBackward":return s(()=>i.deleteBackward(t,{unit:"line"}));case"deleteHardLineForward":return s(()=>i.deleteForward(t,{unit:"block"}));case"deleteSoftLineForward":return s(()=>i.deleteForward(t,{unit:"line"}));case"deleteWordBackward":return s(()=>i.deleteBackward(t,{unit:"word"}));case"deleteWordForward":return s(()=>i.deleteForward(t,{unit:"word"}));case"insertLineBreak":return s(()=>i.insertSoftBreak(t));case"insertParagraph":return s(()=>i.insertBreak(t));case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(d instanceof DataTransfer)return s(()=>w.insertData(t,d));let D=d??"";if(c==="insertText"&&/.*\n.*\n$/.test(D)&&(D=D.slice(0,-1)),D.includes(`
`))return s(()=>{const F=D.split(`
`);F.forEach((y,k)=>{y&&i.insertText(t,y),k!==F.length-1&&i.insertSoftBreak(t)})});if(g.equals(f.anchor.path,f.focus.path)){const[F,y]=A.edges(f),k={start:F.offset,end:y.offset,text:D};if(D&&r&&c==="insertCompositionText"){const N=r.start+r.text.search(/\S|$/);k.start+k.text.search(/\S|$/)===N+1&&k.end===r.start+r.text.length?(k.start-=1,r=null):r=!1}else c==="insertText"?r===null?r=k:r&&A.isCollapsed(f)&&r.end+r.text.length===F.offset?r={...r,text:r.text+D}:r=!1:r=!1;if(E){a(F.path,k);return}}return s(()=>i.insertText(t,D))}}}}},Xl=we({name:"slate-editable",props:{scrollSelectionIntoView:{type:Function,default:nl},placeholder:{type:String,default:()=>""},readOnly:{type:Boolean,default:()=>!1},autoFocus:{type:Boolean,default:()=>!1}},setup(e){const{placeholder:t,readOnly:n,scrollSelectionIntoView:o,autoFocus:r}=e,s=ye(),a=Vs(),u=jl(),l=Ls();Dt(()=>n,B=>{$t.set(s,B),l.value=B});const c=Us({isDraggingInternally:!1,latestElement:null}),f=ae(),d=B=>f.value=B,p=ae(!1),C=B=>{const T=B?.target,P=(T instanceof HTMLElement?T:null)?.tagName;if(P==="INPUT"||P==="TEXTAREA")return;const X=w.toDOMNode(s,s).getRootNode();if(!p.value&&Ae&&X instanceof ShadowRoot){p.value=!0,Nc()?document.execCommand("indent"):b.deselect(s);return}if((ce||!w.isComposing(s))&&!c.isDraggingInternally){const j=w.findDocumentOrShadowRoot(s),{activeElement:$}=j,Z=w.toDOMNode(s,s),se=je(j);if($===Z?(c.latestElement=$,Ee.set(s,!0)):Ee.delete(s),!se)return b.deselect(s);const{anchorNode:oe,focusNode:Pe}=se,Oe=w.hasEditableTarget(s,oe)||w.isTargetInsideNonReadonlyVoid(s,oe),Ze=w.hasTarget(s,Pe);if(Oe&&Ze){const Ce=w.toSlateRange(s,se,{exactMatch:!1,suppressThrow:!0});Ce&&!w.isComposing(s)&&b.select(s,Ce)}n&&(!Oe||!Ze)&&b.deselect(s)}},m=ae(),E=ae();ce&&(E.value=Hl(m)),at(()=>{let B;m.value&&(B=Xt(m.value))&&(ps.set(s,B),ot.set(s,m.value),Ve.set(s,m.value),ct.set(m.value,s))}),Et(()=>{ot.delete(s),Ve.delete(s)});const D=ee(()=>{if(s.selection&&A.isCollapsed(s.selection)&&s.marks){const B=s.selection.anchor,T=h.leaf(s,B.path);if(!Fe.equals(T,s.marks,{loose:!0}))return!0}return!1}),F=()=>{const B=w.findDocumentOrShadowRoot(s),T=je(B);if(!T)return;const _=T.type!=="None";if(!s.selection&&!_)return;const P=T.focusNode;let L;if(me&&T.rangeCount>1){const Z=T.getRangeAt(0),se=T.getRangeAt(T.rangeCount-1);Z.startContainer===P?L=se.endContainer:L=Z.startContainer}else L=T.anchorNode;const X=ot.get(s);let j=!1;if(Mt(X,L)&&Mt(X,P)&&(j=!0),_&&j&&s.selection){const Z=w.toSlateRange(s,T,{exactMatch:!0,suppressThrow:!0});if(Z&&A.equals(Z,s.selection)&&(!D.value||L?.parentElement?.hasAttribute("data-slate-mark-placeholder")))return}if(s.selection&&!w.hasRange(s,s.selection)){s.selection=w.toSlateRange(s,T,{exactMatch:!1,suppressThrow:!0});return}let $=null;try{$=s.selection&&w.toDOMRange(s,s.selection)}catch{}return $?(w.isComposing(s)&&!ce?T.collapseToEnd():A.isBackward(s.selection)?T.setBaseAndExtent($.endContainer,$.endOffset,$.startContainer,$.startOffset):T.setBaseAndExtent($.startContainer,$.startOffset,$.endContainer,$.endOffset),o(s,$)):T.removeAllRanges(),$},y=ml();Dt(()=>y.value,()=>{const B=w.findDocumentOrShadowRoot(s),T=je(B);!T||!w.isFocused(s)||T.rangeCount<=1&&F()});const k=()=>c.isDraggingInternally=!1;at(()=>{const B=w.getWindow(s);B.document.addEventListener("selectionchange",C),B.document.addEventListener("dragend",k),B.document.addEventListener("drop",k),r&&m.value?.focus()}),Et(()=>{const B=w.getWindow(s);B.document.removeEventListener("selectionchange",C),B.document.removeEventListener("dragend",k),B.document.removeEventListener("drop",k)});const N=ae([]),x=B=>{if(Ie){Ln(s,B);const _=w.toDOMNode(s,s).getRootNode();if(p.value&&Ae&&_ instanceof ShadowRoot){const L=B.getTargetRanges()[0],X=new window.Range;let j=L.endContainer;const $=L.endOffset;for(j.nodeType===3&&j.textContent===""&&j.previousSibling&&(j=j.previousSibling);j instanceof HTMLElement&&!j.attributes.getNamedItem("data-slate-string")&&j.lastElementChild;)j=j.lastElementChild;j instanceof HTMLElement&&j.attributes.getNamedItem("data-slate-string")&&j.lastChild&&(j=j.lastChild),X.setStart(L.startContainer,L.startOffset),X.setEnd(j,$);const Z=w.toSlateRange(s,X,{exactMatch:!1,suppressThrow:!1});b.select(s,Z),p.value=!1,B.preventDefault(),B.stopImmediatePropagation();return}if(!n&&w.hasEditableTarget(s,B.target)&&!tl(B,a.onBeforeinput)){if(ce)return E.value?.handleDOMBeforeInput(B);const{selection:P}=s,{inputType:L}=B,X=B.dataTransfer||B.data||void 0,j=L==="insertCompositionText"||L==="deleteCompositionText";if(j&&w.isComposing(s))return;let $=!1;if(L==="insertText"&&P&&A.isCollapsed(P)&&B.data&&B.data.length===1&&/[a-z ]/i.test(B.data)&&P.anchor.offset!==0){$=!0,s.marks&&($=!1);const{anchor:se}=P,[oe,Pe]=w.toDOMPoint(s,se),Oe=oe.parentElement?.closest("a"),Ze=w.getWindow(s);if($&&Oe&&w.hasDOMNode(s,Oe)){const Ce=Ze?.document.createTreeWalker(Oe,NodeFilter.SHOW_TEXT).lastChild();Ce===oe&&Ce.textContent?.length===Pe&&($=!1)}if($&&oe.parentElement&&Ze?.getComputedStyle(oe.parentElement)?.whiteSpace==="pre"){const Ce=i.above(s,{at:se.path,match:Jt=>h.isElement(Jt)&&i.isBlock(s,Jt)});Ce&&h.string(Ce[0]).includes("	")&&($=!1)}}if(!L.startsWith("delete")||L.startsWith("deleteBy")){const[se]=B.getTargetRanges();if(se){const oe=w.toSlateRange(s,se,{exactMatch:!1,suppressThrow:!1});if(!P||!A.equals(P,oe)){$=!1;const Pe=!j&&s.selection&&i.rangeRef(s,s.selection);b.select(s,oe),Pe&&rt.set(s,Pe)}}}if(j)return;if($||B.preventDefault(),P&&A.isExpanded(P)&&L.startsWith("delete")){const se=L.endsWith("Backward")?"backward":"forward";i.deleteFragment(s,{direction:se});return}switch(L){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{i.deleteFragment(s);break}case"deleteContent":case"deleteContentForward":{i.deleteForward(s);break}case"deleteContentBackward":{i.deleteBackward(s);break}case"deleteEntireSoftLine":{i.deleteBackward(s,{unit:"line"}),i.deleteForward(s,{unit:"line"});break}case"deleteHardLineBackward":{i.deleteBackward(s,{unit:"block"});break}case"deleteSoftLineBackward":{i.deleteBackward(s,{unit:"line"});break}case"deleteHardLineForward":{i.deleteForward(s,{unit:"block"});break}case"deleteSoftLineForward":{i.deleteForward(s,{unit:"line"});break}case"deleteWordBackward":{i.deleteBackward(s,{unit:"word"});break}case"deleteWordForward":{i.deleteForward(s,{unit:"word"});break}case"insertLineBreak":i.insertSoftBreak(s);break;case"insertParagraph":{i.insertBreak(s);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{L==="insertFromComposition"&&w.isComposing(s)&&(u.value=!1,Me.set(s,!1)),X?.constructor.name==="DataTransfer"?w.insertData(s,X):typeof X=="string"&&($?N.value.push(()=>i.insertText(s,X)):i.insertText(s,X));break}}const Z=rt.get(s)?.unref();rt.delete(s),Z&&(!s.selection||!A.equals(s.selection,Z))&&b.select(s,Z)}}else if(!n&&!ue(B,a.onBeforeinput)&&w.hasSelectableTarget(s,B.target)&&(B.preventDefault(),!w.isComposing(s))){const T=B.data;i.insertText(s,T)}},R=B=>{if(!(ce||ue(B,a.onInput))){for(const T of N.value)T();N.value=[],w.isFocused(s)||Ln(s,B)}},K=B=>{if(n||!w.hasSelectableTarget(s,B.target)||ue(B,a.onBlur))return;const T=w.findDocumentOrShadowRoot(s);if(c.latestElement===T.activeElement)return;const{relatedTarget:_}=B,P=w.toDOMNode(s,s);if(_!==P&&!(fe(_)&&_.hasAttribute("data-slate-spacer"))){if(_!=null&&De(_)&&w.hasDOMNode(s,_)){const L=w.toSlateNode(s,_);if(tt.isElement(L)&&!s.isVoid(L))return}Ae&&je(T)?.removeAllRanges(),Ee.delete(s)}},I=B=>{if(w.hasTarget(s,B.target)&&!ue(B,a.onClick)&&De(B.target)){const T=w.toSlateNode(s,B.target),_=w.findPath(s,T);if(!i.hasPath(s,_)||Be(h.get(s,_))!==T)return;if(B.detail===3&&_.length>=1){let $=_;h.isElement(T)&&i.isBlock(s,T)||($=i.above(s,{match:oe=>h.isElement(oe)&&i.isBlock(s,oe),at:_})?.[1]??_.slice(0,1));const Z=i.range(s,$);b.select(s,Z);return}if(n)return;const P=i.start(s,_),L=i.end(s,_),X=i.void(s,{at:P}),j=i.void(s,{at:L});if(X&&j&&g.equals(X[1],j[1])){const $=i.range(s,P);b.select(s,$)}}},ie=B=>{if(!(gt(B)||!w.hasSelectableTarget(s,B.target))&&(w.isComposing(s)&&(u.value=!1,Me.set(s,!1)),!(ce||ue(B,a.onCompositionend))&&!Ae&&!Pc&&!Rc&&!Ic&&!Oc&&B.data)){i.insertText(s,B.data);const T=Ft.get(s);Ft.delete(s),T!==void 0&&(s.marks=T)}},S=B=>{ue(B,a.onCompositionupdate)||w.hasSelectableTarget(s,B.target)&&(w.isComposing(s)||(u.value=!0,Me.set(s,!0)))},W=B=>{if(gt(B)||!w.hasSelectableTarget(s,B.target)||(u.value=!0,Me.set(s,!0),ce||ue(B,a.onCompositionstart)))return;const{selection:T}=s;if(T&&A.isExpanded(T)){i.deleteFragment(s);return}},v=B=>{w.hasSelectableTarget(s,B.target)&&!ue(B,a.onCopy)&&!gt(B)&&(B.preventDefault(),B.clipboardData&&w.setFragmentData(s,B.clipboardData,"copy"))},M=B=>{if(!n&&w.hasSelectableTarget(s,B.target)&&!ue(B,a.onCut)&&!gt(B)){B.preventDefault(),B.clipboardData&&w.setFragmentData(s,B.clipboardData,"cut");const T=s.selection;if(T)if(A.isExpanded(T))i.deleteFragment(s);else{const _=h.parent(s,T.anchor.path);i.isVoid(s,_)&&b.delete(s)}}},q=B=>{if(w.hasTarget(s,B.target)&&!ue(B,a.onDragover)){const T=w.toSlateNode(s,B.target);h.isElement(T)&&i.isVoid(s,T)&&B.preventDefault()}},Ge=B=>{if(!n&&w.hasTarget(s,B.target)&&!ue(B,a.onDragstart)){const T=w.toSlateNode(s,B.target),_=w.findPath(s,T);if(h.isElement(T)&&i.isVoid(s,T)||i.void(s,{at:_,voids:!0})){const L=i.range(s,_);b.select(s,L)}c.isDraggingInternally=!0,B.dataTransfer&&w.setFragmentData(s,B.dataTransfer,"drag")}},he=B=>{if(!n&&w.hasTarget(s,B.target)&&!ue(B,a.onDrop)){B.preventDefault();const T=s.selection,_=w.findEventRange(s,B),P=B.dataTransfer;b.select(s,_),c.isDraggingInternally&&T&&!A.equals(T,_)&&!i.void(s,{at:_,voids:!0})&&b.delete(s,{at:T}),P&&w.insertData(s,P),w.isFocused(s)||w.focus(s)}},H=B=>{!n&&c.isDraggingInternally&&a.onDragend&&w.hasTarget(s,B.target)&&a.onDragend(B)},Te=B=>{if(!n&&w.hasEditableTarget(s,B.target)&&!ue(B,a.onFocus)){const T=w.toDOMNode(s,s),_=w.findDocumentOrShadowRoot(s);if(c.latestElement=_.activeElement,me&&B.target!==T){T.focus();return}Ee.set(s,!0)}},Ne=B=>{if(!n&&w.hasEditableTarget(s,B.target)){if(w.isComposing(s)&&B.isComposing===!1&&(Me.set(s,!1),u.value=!1),ue(B,a.onKeydown)||w.isComposing(s))return;const T=s.children[s.selection!==null?s.selection.focus.path[0]:0],_=_s(h.string(T))==="rtl";if(Y.isRedo(B)){B.preventDefault();const P=s;typeof P.redo=="function"&&P.redo();return}if(Y.isUndo(B)){B.preventDefault();const P=s;typeof P.undo=="function"&&P.undo();return}if(Y.isMoveLineBackward(B)){B.preventDefault(),b.move(s,{unit:"line",reverse:!0});return}if(Y.isMoveLineForward(B)){B.preventDefault(),b.move(s,{unit:"line"});return}if(Y.isExtendLineBackward(B)){B.preventDefault(),b.move(s,{unit:"line",edge:"focus",reverse:!0});return}if(Y.isExtendLineForward(B)){B.preventDefault(),b.move(s,{unit:"line",edge:"focus"});return}if(Y.isMoveBackward(B)){B.preventDefault(),s.selection&&A.isCollapsed(s.selection)?b.move(s,{reverse:!_}):b.collapse(s,{edge:_?"end":"start"});return}if(Y.isMoveForward(B)){B.preventDefault(),s.selection&&A.isCollapsed(s.selection)?b.move(s,{reverse:_}):b.collapse(s,{edge:_?"start":"end"});return}if(Y.isMoveWordBackward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)&&b.collapse(s,{edge:"focus"}),b.move(s,{unit:"word",reverse:!_});return}if(Y.isMoveWordForward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)&&b.collapse(s,{edge:"focus"}),b.move(s,{unit:"word",reverse:_});return}if(Ie){if((Zt||Ae)&&s.selection&&(Y.isDeleteBackward(B)||Y.isDeleteForward(B))&&A.isCollapsed(s.selection)){const P=h.parent(s,s.selection.anchor.path);if(h.isElement(P)&&i.isVoid(s,P)&&(i.isInline(s,P)||i.isBlock(s,P))){B.preventDefault(),i.deleteBackward(s,{unit:"block"});return}}}else{if(Y.isBold(B)||Y.isItalic(B)||Y.isTransposeCharacter(B)){B.preventDefault();return}if(Y.isSoftBreak(B)){B.preventDefault(),i.insertSoftBreak(s);return}if(Y.isSplitBlock(B)){B.preventDefault(),i.insertBreak(s);return}if(Y.isDeleteBackward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s);return}if(Y.isDeleteForward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s);return}if(Y.isDeleteLineBackward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s,{unit:"line"});return}if(Y.isDeleteLineForward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s,{unit:"line"});return}if(Y.isDeleteWordBackward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s,{unit:"word"});return}if(Y.isDeleteWordForward(B)){B.preventDefault(),s.selection&&A.isExpanded(s.selection)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s,{unit:"word"});return}}}},ve=B=>{!n&&w.hasEditableTarget(s,B.target)&&!ue(B,a.onPaste)&&(!Ie||Ac(B)||Ae)&&(B.preventDefault(),B.clipboardData&&w.insertData(s,B.clipboardData))},Ye=ee(()=>({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word",minHeight:f.value?f.value+"px":"unset"})),Xe=ee(()=>Ie||!Rt?a.spellcheck:!1),Re=ee(()=>Ie||!Rt?a.autocorrect:void 0),Se=ee(()=>Ie||!Rt?a.autocapitalize:void 0),_e=ee(()=>!!t&&s.children?.length===1&&Array.from(h.texts(s)).length===1&&h.string(s)===""&&!u.value);return Bl(ee(()=>t)),yl(_e),Fl(d),()=>Q(a.is||"div",{role:n?void 0:"textbox","aria-multiline":n?void 0:!0,translate:"no","data-slate-editor":!0,"data-slate-node":"value",zindex:-1,spellcheck:Xe.value,autocorrect:Re.value,autocapitalize:Se.value,contenteditable:!n,ref:m,style:Ye.value,onBeforeinput:x,onInput:R,onBlur:K,onClick:I,onCompositionend:ie,onCompositionupdate:S,onCompositionstart:W,onCopy:v,onCut:M,onDragover:q,onDragstart:Ge,onDrop:he,onDragend:H,onFocus:Te,onKeydown:Ne,onPaste:ve},Q(js,{element:s}))}});export{w as D,i as E,O as L,h as N,et as O,g as P,A as R,Gl as S,b as T,tt as a,Xl as b,Vl as c,Ls as d,V as e,ql as f,qc as g,Kl as h,re as i,Ks as j,Yl as k,Bt as l,Fe as m,Mc as t,ye as u,Ul as w};
