import{u as y,D as b,T as x,w,c as g,S as v,b as _}from"./editable-OBw7MXqz.js";import{u as E}from"./use-inherit-ref-lmEEbD6_.js";import{d as m,A as V,o as h,c as B,b as c,D as p,B as C,e as n,q as k,f as D,w as T,a as M,h as u}from"./index-cO_khfoC.js";import{w as N}from"./with-history-Bo5zoz4N.js";const P=["src"],S=["value"],U=m({__name:"VideoElement",props:{element:{}},setup(a){const i=["http:","https:"],d=y(),s=a,l=k(()=>{let e=null;try{e=new URL(s.element.url)}catch(t){console.error(t)}return e&&i.includes(e.protocol)?e.href:"about:blank"}),o=e=>{const t=b.findPath(d,s.element),f={url:e.target.value};x.setNodes(d,f,{at:t})},r=V();return(e,t)=>(h(),B("div",C({contenteditable:!1},n(r)),[c("iframe",{src:`${l.value}?title=0&byline=0&portrait=0`,frameBorder:"0",style:{border:"none",width:"100%",height:"400px"}},null,8,P),c("input",{type:"text",style:{"margin-top":"5px","box-sizing":"border-box"},value:a.element.url,onChange:o,onCompositionstart:t[0]||(t[0]=p(()=>{},["stop"])),onCompositionupdate:t[1]||(t[1]=p(()=>{},["stop"])),onCompositionend:t[2]||(t[2]=p(()=>{},["stop"]))},null,40,S)],16))}}),$=m({__name:"index",setup(a){const i=[{type:"paragraph",children:[{text:"In addition to simple image nodes, you can actually create complex embedded nodes. For example, this one contains an input element that lets you change the video being rendered!"}]},{type:"video",url:"https://player.vimeo.com/video/26689853",children:[{text:""}]},{type:"paragraph",children:[{text:"Try it out! This editor is built to handle Vimeo embeds, but you could handle any type."}]}],s=N((o=>{const r=o.isVoid;return o.isVoid=e=>e.type==="video"?!0:r(e),o})(w(g())));s.children=i;const l=({attributes:o,children:r,element:e})=>e.type==="video"?u(U,{element:e,...E(o)},()=>r):u("p",o,r);return(o,r)=>(h(),D(n(v),{editor:n(s),"render-element":l},{default:T(()=>[M(n(_),{placeholder:"Enter some text..."})]),_:1},8,["editor"]))}});export{$ as default};
